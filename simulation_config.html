<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>SN@ilWare Simulation Configuration</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Xavier Garrido" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="css/styles.css" />
               <link rel="stylesheet" href="css/org-pygments.css" />
               <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script><script type="text/javascript">
  function randomLinkColor() {
      var colors = ['#f1c40f','#e74c3c','#3399cc','#e67e22','#67ad00','#8e44ad','#1abc9c','#003399'];
      var random_color = colors[Math.floor(Math.random() * colors.length)];
      var elements = document.querySelectorAll('a');
      [].slice.call(elements).forEach(function(elem) {
          //elem.style.color = random_color;
      });
  }
  function displayTOC() {
      var ttoc = document.getElementById("text-table-of-contents");
      if (ttoc) {
          var maincontent = '<a class="button"><i class="fa fa-list"></i></a>'
          maincontent += "<div>" + ttoc.innerHTML + "</div>";
          document.getElementById("toc").innerHTML = maincontent;
      } else {
          document.getElementById("toc").style.display = "none";
          document.getElementById("preamble").style.top = "10px";
      }
     }
  </script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      messageStyle: "none",
      TeX: {
          extensions: ["cancel.js"],
          Macros: {
              vv: ["{\\vec{#1}}",1],
              Upsigma: "{\\Sigma}",
              Updelta: "{\\Delta}",
              varoiint: "{\\iint}",
              varoint: "{\\int}",
              grad: "{\\vec{\\nabla}}",
              div: "{\\vec{\\nabla}.}",
              rot: "{\\vec{\\nabla}\\times\\,}",
              ket: ["{|#1 \\rangle}",1],
              bra: ["{\\langle#1|}",1],
              psh: ["{\\langle#1|#2 \\rangle}",2],
              bm: ["{\\boldsymbol #1}",1]
          }
      }
  });
  MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
      var TEX = MathJax.InputJax.TeX;
      TEX.Definitions.macros.unit = "jaxunit";
      TEX.Parse.Augment({
          jaxunit: function (name) {
              var n = this.GetBrackets(name),
              unit = this.GetArgument(name)
              if (n == null) {n = ""}
              var tex = n + '\\,\\text{'+unit+'}';
              this.string = tex + this.string.slice(this.i); this.i = 0;
          }
      });
  });
  MathJax.Hub.Queue(function () {
      document.getElementById("spinner").style.display = "none";
  });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <div id="spinner">
    <div id="bounce1"></div>
    <div id="bounce2"></div>
    <div id="bounce3"></div>
    <small>Loading MathJax...</small>
  </div>
</head>
<body onload="randomLinkColor();displayTOC();"><div id="toc"></div>
<div id="preamble" class="status">
 <a href="https://github.com/xgarrido/snemo_simulation_configuration"><i class="fa fa-github"></i></a><br/> 
</div>
<div id="content">
<h1 class="title">SN@ilWare Simulation Configuration</h1>
<div id="table-of-contents">
<h2></h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. Introduction</a></li>
<li><a href="#orgheadline14">2. Pipeline general configuration</a>
<ul>
<li><a href="#orgheadline7">2.1. Module manager</a></li>
<li><a href="#orgheadline11">2.2. Service manager</a></li>
<li><a href="#orgheadline13">2.3. DLL loader</a></li>
</ul>
</li>
<li><a href="#orgheadline2">3. Modules</a>
<ul>
<li><a href="#orgheadline23">3.1. I/O modules</a></li>
<li><a href="#orgheadline32">3.2. Utility modules</a></li>
<li><a href="#orgheadline41">3.3. Simulation module</a></li>
<li><a href="#orgheadline51">3.4. Event header module</a></li>
<li><a href="#orgheadline73">3.5. Calibration modules</a></li>
<li><a href="#orgheadline80">3.6. Tracker clustering modules</a></li>
<li><a href="#orgheadline95">3.7. Tracker fitting module</a></li>
<li><a href="#orgheadline105">3.8. Charged particle tracking module</a></li>
<li><a href="#orgheadline123">3.9. &gamma; tracking module</a></li>
<li><a href="#orgheadline134">3.10. Particle identification module</a></li>
<li><a href="#orgheadline146">3.11. Topology module</a></li>
<li><a href="#orgheadline168">3.12. Chain modules</a></li>
<li><a href="#orgheadline169">3.13. Miscellaneous</a></li>
</ul>
</li>
<li><a href="#orgheadline3">4. Services</a>
<ul>
<li><a href="#orgheadline170">4.1. Context service</a></li>
<li><a href="#orgheadline171">4.2. Geometry service</a></li>
<li><a href="#orgheadline219">4.3. Cuts service</a></li>
</ul>
</li>
<li><a href="#orgheadline220">5. Running SN@ilWare processing chain</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This file contains a SN@ilWare configuration to run SuperNEMO simulations. The
current version is hosted at
<a href="https://github.com/xgarrido/snemo_simulation_configuration">https://github.com/xgarrido/snemo_simulation_configuration</a> under <code>git</code> version
control. You can clone this repository by doing
</p>

<div class="org-src-container">

<pre class="src src-shell">git clone https://github.com/xgarrido/snemo_simulation_configuration snemo_configuration
</pre>
</div>

<p>
This will create a directory <code>snemo_configuration</code> in the working directory
containing all the source files needed to configure and to setup SN@ilWare
programs.
</p>

<p>
The configuration files are organised using <a href="http://orgmode.org/worg/org-contrib/babel/index.html">org-babel</a> and its ability to execute
source code. It requires then a recent installation of emacs<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> which bundles
<code>org</code>. Without entering into too much details regarding <code>org-babel</code> abilities,
the basic idea is to give a "literate" way to navigate through the different
sections, each of them representing a configuration file. Moreover, using <code>org</code>
folding/unfolding capability, item can be hide and the user can focus on
relevant parts.
 <div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara"> At the time of writing this document, emacs version is 24.2. </p><br/></div>
</p>

<p>
To export the different configuration files, you can run <code>org-babel-tangle</code>
which will tangle each code block into the given file<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> or use the associated
Makefile. The author recommends to use the Makefile since the tangling process
is asynchronous and thus, does not freeze your emacs (<code>org-babel-tangle</code>
"occupies" emacs during its execution).
 <div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara"> Emacs lisp function can be run using <code>ALT-x</code> command and typing the function name. </p><br/></div>
</p>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-2">
<h2 id="orgheadline14"><span class="section-number-2">2</span> Pipeline general configuration</h2>
<div class="outline-text-2" id="text-2">
<p>
SN@ilWare implements the concept of data processing pipeline. An event record
object is passed through a chain of data processing modules, each of them being
responsible for a given task. Modules and services are declared in Section
<a href="#orgheadline2">3</a> and Section <a href="#orgheadline3">4</a>. For more details on running SuperNEMO simulations
and the concept behind modules/services see <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=1889">these mandatory presentations</a> given
by F. Mauger.
</p>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">2.1</span> Module manager</h3>
<div class="outline-text-3" id="text-2-1">
<p>
This file is the main and central piece of code for loading all modules/services
needed by <code>dpp_processing</code> binary. It provides links to module files and
service files.
</p>
</div>
<div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4"><span class="section-number-4">2.1.1</span> Logging priority</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Module manager logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded module factory debug flag</span>
factory.debug : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded module factory 'no preload' flag</span>
factory.no_preload : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5"><span class="section-number-4">2.1.2</span> Service manager configuration</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The configuration file of the embedded service manager</span>
service_manager.configuration : string[1] as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/service_manager.conf"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-4">
<h4 id="orgheadline6"><span class="section-number-4">2.1.3</span> Configuration files for modules</h4>
<div class="outline-text-4" id="text-2-1-3">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The configuration files for modules</span>
modules.configuration_files : string[12] as <span class="org-variable-name">path</span> =                     <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/io_modules.conf"</span>                 <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/utl_modules.conf"</span>                <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/simulation_modules.conf"</span>         <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/event_header_modules.conf"</span>       <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/calibration_modules.conf"</span>        <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/tracker_clustering_modules.conf"</span> <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/tracker_fitting_modules.conf"</span>    <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/particle_tracking_modules.conf"</span>  <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/gamma_tracking_modules.conf"</span>     <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/pid_modules.conf"</span>                <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/chain_modules.conf"</span>              <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/topology_modules.conf"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">2.2</span> Service manager</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8"><span class="section-number-4">2.2.1</span> Logging priority</h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Service manager logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-4">
<h4 id="orgheadline9"><span class="section-number-4">2.2.2</span> Name &amp; description</h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the service manager</span>
name : <span class="org-variable-name">string</span> = <span class="org-string">"sn_service_manager"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The description of the service manager</span>
description : <span class="org-variable-name">string</span> = <span class="org-string">"A SuperNEMO service manager"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">2.2.3</span> List of service files</h4>
<div class="outline-text-4" id="text-2-2-3">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of files that describe services</span>
services.configuration_files : string[1] as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/services.conf"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">2.3</span> DLL loader</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-orgheadline12" class="outline-4">
<h4 id="orgheadline12"><span class="section-number-4">2.3.1</span> Libraries</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
This part set the different libraries to be loaded at runtime. This is needed
since event data models or algorithms may be defined in other libraries than the
<code>dpp</code> and inherited libraries. The following table sets a full (and exhaustive)
list of needed libraries
</p>

<table id="orgtable1" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 1:</span> <b>Libraries to be used by modules.</b></caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Bayeux_mctools_geant4</td>
<td class="org-left">$SNAILWARE_PRO_DIR/bayeux/install/lib64/libBayeux_mctools_geant4.so</td>
</tr>

<tr>
<td class="org-left">Falaise</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/libFalaise.so</td>
</tr>

<tr>
<td class="org-left">Falaise_MTC</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_MockTrackerClusterizer.so</td>
</tr>

<tr>
<td class="org-left">Falaise_CAT</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_CAT.so</td>
</tr>

<tr>
<td class="org-left">TrackFit</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libTrackFit.so</td>
</tr>

<tr>
<td class="org-left">Falaise_TrackFit</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_TrackFit.so</td>
</tr>

<tr>
<td class="org-left">Falaise_CPT</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_ChargedParticleTracking.so</td>
</tr>

<tr>
<td class="org-left">GammaTracking</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libGammaTracking.so</td>
</tr>

<tr>
<td class="org-left">Falaise_GammaTracking</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_GammaTracking.so</td>
</tr>

<tr>
<td class="org-left">Falaise_GammaClustering</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_GammaClustering.so</td>
</tr>

<tr>
<td class="org-left">Falaise_PID</td>
<td class="org-left">$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_ParticleIdentification.so</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "filename"</span>
[<span class="org-variable-name">name</span>=<span class="org-string">"Bayeux_mctools_geant4"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/bayeux/install/lib64/libBayeux_mctools_geant4.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Bayeux_mctools_geant4 library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/libFalaise.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_MTC"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_MockTrackerClusterizer.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_MTC library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_CAT"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_CAT.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_CAT library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"TrackFit"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libTrackFit.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The TrackFit library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_TrackFit"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_TrackFit.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_TrackFit library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_CPT"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_ChargedParticleTracking.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_CPT library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"GammaTracking"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libGammaTracking.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The GammaTracking library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_GammaTracking"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_GammaTracking.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_GammaTracking library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_GammaClustering"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_GammaClustering.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_GammaClustering library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"Falaise_PID"</span> <span class="org-variable-name">filename</span>=<span class="org-string">"$SNAILWARE_PRO_DIR/falaise/install/lib64/Falaise/modules/libFalaise_ParticleIdentification.so"</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The Falaise_PID library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2"><span class="section-number-2">3</span> Modules</h2>
<div class="outline-text-2" id="text-3">
<p>
A data processing module is an object that performs some specific action (apply
an algorithm) on event records (see <a href="https://nemo.lpc-caen.in2p3.fr/wiki/SNSW_SNailWare_FAQ#Dataprocessingmodules">SN@ilWare FAQ</a> for more details). It inherits
the <code>dpp::base_module</code> mother/interface class. A module class implements a few
mandatory methods :
</p>

<ul class="org-ul">
<li>constructor</li>
<li>destructor</li>
<li><code>initialize</code></li>
<li><code>reset</code></li>
<li><code>process</code></li>
</ul>

<p>
The next items hold the configuration for several modules used in SN@ilWare
pipeline processing.
</p>
</div>

<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23"><span class="section-number-3">3.1</span> I/O modules</h3>
<div class="outline-text-3" id="text-3-1">
<p>
This section defines some I/O output modules to store data record. By default,
all I/O files are saved in <code>/tmp/${USER}/snemo.d</code> directory.
</p>
</div>

<div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">3.1.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16"><span class="section-number-4">3.1.2</span> Simulation output</h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_simulated"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_simulated.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-4">
<h4 id="orgheadline17"><span class="section-number-4">3.1.3</span> Calibration output</h4>
<div class="outline-text-4" id="text-3-1-3">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_calibrated"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_calibrated.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18"><span class="section-number-4">3.1.4</span> Tracker clustering output</h4>
<div class="outline-text-4" id="text-3-1-4">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_clustering.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-4">
<h4 id="orgheadline19"><span class="section-number-4">3.1.5</span> Tracker trajectory output</h4>
<div class="outline-text-4" id="text-3-1-5">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_trajectory"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_trajectory.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20"><span class="section-number-4">3.1.6</span> Particle track output</h4>
<div class="outline-text-4" id="text-3-1-6">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_particle_track"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_particle_track.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-4">
<h4 id="orgheadline21"><span class="section-number-4">3.1.7</span> Analysis output</h4>
<div class="outline-text-4" id="text-3-1-7">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_analysed"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_analysed.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22"><span class="section-number-4">3.1.8</span> Selection output</h4>
<div class="outline-text-4" id="text-3-1-8">
<ul class="org-ul">
<li><p>
Event header cuts
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_header_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_header_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_header_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_header_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div></li>

<li><p>
Simulation cuts
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_simulated_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_simulated_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_simulated_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_simulated_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div></li>

<li><p>
Calibration cuts
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_calibrated_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_calibrated_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_calibrated_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_calibrated_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div></li>

<li><p>
Tracking cuts
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_clustering_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_clustering_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_clustering_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_clustering_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div></li>

<li><p>
Fitting cuts
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_trajectory_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_trajectory_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_trajectory_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_trajectory_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div></li>

<li><p>
Particle track cuts
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_particle_track_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_particle_track_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_particle_track_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_particle_track_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline32" class="outline-3">
<h3 id="orgheadline32"><span class="section-number-3">3.2</span> Utility modules</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Here we define some common and useful tasks such as removing data/MC hits.
</p>
</div>

<div id="outline-container-orgheadline24" class="outline-4">
<h4 id="orgheadline24"><span class="section-number-4">3.2.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">3.2.2</span> Remove event header</h4>
<div class="outline-text-4" id="text-3-2-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_header"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"EH"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">3.2.3</span> Remove simulated data bank</h4>
<div class="outline-text-4" id="text-3-2-3">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_simulated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"SD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27"><span class="section-number-4">3.2.4</span> Remove calibrated data bank</h4>
<div class="outline-text-4" id="text-3-2-4">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_calibrated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"CD"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28"><span class="section-number-4">3.2.5</span> Remove tracker clustering data bank</h4>
<div class="outline-text-4" id="text-3-2-5">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"TCD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline29" class="outline-4">
<h4 id="orgheadline29"><span class="section-number-4">3.2.6</span> Remove tracker trajectory data bank</h4>
<div class="outline-text-4" id="text-3-2-6">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_tracker_trajectory_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"TTD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline30" class="outline-4">
<h4 id="orgheadline30"><span class="section-number-4">3.2.7</span> Remove particle track data bank</h4>
<div class="outline-text-4" id="text-3-2-7">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"PTD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline31" class="outline-4">
<h4 id="orgheadline31"><span class="section-number-4">3.2.8</span> Dump module</h4>
<div class="outline-text-4" id="text-3-2-8">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"dump"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::dump_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output stream</span>
output : <span class="org-variable-name">string</span> = <span class="org-string">"clog"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline41" class="outline-3">
<h3 id="orgheadline41"><span class="section-number-3">3.3</span> Simulation module</h3>
<div class="outline-text-3" id="text-3-3">
</div>
<div id="outline-container-orgheadline33" class="outline-4">
<h4 id="orgheadline33"><span class="section-number-4">3.3.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@variant_remove_quotes Remove quotes arround string property</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline40" class="outline-4">
<h4 id="orgheadline40"><span class="section-number-4">3.3.2</span> G4 simulation</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
A processor that populate the event record <code>simulated data</code> bank with Geant4
output (see <a href="https://nemo.lpc-caen.in2p3.fr/wiki/SNSW_SNailWare_FAQ#Monte-Carloproduction">SN@ilWare FAQ</a>).
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"simulation"</span> <span class="org-variable-name">type</span>=<span class="org-string">"mctools::g4::simulation_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline34"></a>Logging flag<br  /><div class="outline-text-5" id="text-orgheadline34">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The simulation manager logging priority</span>
manager.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline35"></a>Bank &amp; service labels<br  /><div class="outline-text-5" id="text-orgheadline35">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The Geometry Service label</span>
Geo_label : <span class="org-variable-name">string</span> = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The 'Simulated data' bank label in the event record</span>
SD_label  : <span class="org-variable-name">string</span> = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Flag to allow cleaning of some former simulated data bank if any (default: 0)</span>
erase_former_SD_bank : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li>
<li><a id="orgheadline36"></a>Seed values<br  /><div class="outline-text-5" id="text-orgheadline36">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The simulation manager PRNG seed</span>
manager.seed : <span class="org-variable-name">integer</span> = @variant(core:random_seed_flag/if_random_seed/null_seed|2)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The vertex generator PRNG seed</span>
manager.vertex_generator_seed : <span class="org-variable-name">integer</span> = @variant(core:random_seed_flag/if_random_seed/null_seed|4)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The event generator PRNG seed</span>
manager.event_generator_seed  : <span class="org-variable-name">integer</span> = @variant(core:random_seed_flag/if_random_seed/null_seed|5)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The SHPF PRNG seed</span>
manager.shpf_seed : <span class="org-variable-name">integer</span> = @variant(core:random_seed_flag/if_random_seed/null_seed|6)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The saving of PRNG seeds</span>
manager.output_prng_seeds_file : string as <span class="org-variable-name">path</span> = @variant(core:output_path)@variant(core:filename|<span class="org-string">"prng_seeds.save"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The saving of PRNG states</span>
manager.output_prng_states_file : string as <span class="org-variable-name">path</span> = @variant(core:output_path)@variant(core:filename|<span class="org-string">"prng_states.save"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The modulo for PRNG states backup</span>
manager.prng_states_save_modulo : <span class="org-variable-name">integer</span> = 10
</pre>
</div>
</div></li>
<li><a id="orgheadline37"></a>Vertex generator<br  /><div class="outline-text-5" id="text-orgheadline37">
<p>
Several common vertex generators are available such as :
</p>
<ul class="org-ul">
<li>tracker_gas_bulk,</li>
<li>source_strips_bulk,</li>
<li>source_strips_surface.</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The vertex generator PRNG label</span>
manager.vertex_generator_name : <span class="org-variable-name">string</span>  = @variant(simulation:vertex_generator|<span class="org-string">"source_strips_bulk"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline38"></a>Event generator<br  /><div class="outline-text-5" id="text-orgheadline38">
<p>
Most used event generators are :
</p>
<ul class="org-ul">
<li>Se82.0nubb,</li>
<li>Bi214_Po214,</li>
<li>Tl208,</li>
<li>multi_particles,</li>
<li>multi_gamma_particles,</li>
<li>electron_monokinetic,</li>
<li>alpha_monokinetic.</li>
</ul>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The event generator PRNG label</span>
manager.event_generator_name : <span class="org-variable-name">string</span>  = @variant(simulation:event_generator|<span class="org-string">"Se82.0nubb"</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline39"></a>G4 manager<br  /><div class="outline-text-5" id="text-orgheadline39">
<p>
The full <code>geant4</code> configuration can be found in the <a href="./sng4_manager.html">sng4_manager</a> file.
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The simulation manager configuration file</span>
manager.configuration_filename : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/sng4_manager.conf"</span>
</pre>
</div>
</div></li></ul>
</div>
</div>

<div id="outline-container-orgheadline51" class="outline-3">
<h3 id="orgheadline51"><span class="section-number-3">3.4</span> Event header module</h3>
<div class="outline-text-3" id="text-3-4">
<p>
After Geant4 simulation, no event header is added and available in the event
record. This module adds some information related either to real data (run
number) or simulated data like <code>genbb</code> weight in case the total energy of primary
particles has been restricted.
</p>
</div>

<div id="outline-container-orgheadline42" class="outline-4">
<h4 id="orgheadline42"><span class="section-number-4">3.4.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-4-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-4">
<h4 id="orgheadline43"><span class="section-number-4">3.4.2</span> General informations</h4>
<div class="outline-text-4" id="text-3-4-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"add_header"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::processing::event_header_utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"add_header"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
add_header.bank_label : <span class="org-variable-name">string</span> = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The run number</span>
add_header.run_number : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The number of the first event number to be set</span>
add_header.event_number : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The event weight given by GENBB and used for 'energy_range' mode</span>
add_header.use_genbb_weight : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The event label from GENBB settings</span>
add_header.use_genbb_label  : <span class="org-variable-name">boolean</span> = true
</pre>
</div>

<p>
Among the options offered by <code>event_header_utils_module</code>, there is a possibility
to give an external file (following <code>datatools::properties</code> writing conventions)
where additionnal informations can be added. Typical use case is the definition
of some properties/descriptions of simulation runs (see below).
</p>

<p>
The <code>external_properties_prefix</code> allows to filter which properties should be
stored. If no <code>external_properties_prefix</code> field is defined then all the
properties are used and serialized.
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The external properties files to be exported in event_header properties</span>
add_header.external_properties_path : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/snsimulation_header.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The external properties prefix to export only properties starting with this prefix</span>
add_header.external_properties_prefix : <span class="org-variable-name">string</span> = <span class="org-string">"analysis"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline49" class="outline-4">
<h4 id="orgheadline49"><span class="section-number-4">3.4.3</span> Analysis informations</h4>
<div class="outline-text-4" id="text-3-4-3">
</div>
<ul class="org-ul"><li><a id="orgheadline44"></a>Store the current <code>git</code> version of the configuration<br  /><div class="outline-text-5" id="text-orgheadline44">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The version control status</span>
analysis.vc_status : <span class="org-variable-name">string</span> = <span class="org-string">"git master branch - commit a31847f - 2015-09-22"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline45"></a>Set analysis description<br  /><div class="outline-text-5" id="text-orgheadline45">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The analysis description</span>
analysis.description : <span class="org-variable-name">string</span> = <span class="org-string">"Sensitivity studies for SuperNEMO demonstrator"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline46"></a>Set the total number of event simulated<br  /><div class="outline-text-5" id="text-orgheadline46">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The total number of event simulated</span>
analysis.total_number_of_event : <span class="org-variable-name">real</span> = @variant(simulation:total_number_of_event|1)
</pre>
</div>
</div></li>

<li><a id="orgheadline47"></a>Set the geometrical origin of the vertex<br  /><div class="outline-text-5" id="text-orgheadline47">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Origin of the vertices</span>
analysis.vertex_origin : <span class="org-variable-name">string</span> = @variant(simulation:vertex_generator|<span class="org-string">"source_strips_bulk"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline48"></a>Store the job id<br  /><div class="outline-text-5" id="text-orgheadline48">
<p>
When simulations are done @ Lyon and send to the Grid Engine, every process get
a unique job-ID. We store it within the event header in order to get back to the
simulation setup if needed.
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The job-ID of the process</span>
analysis.jobid : <span class="org-variable-name">integer</span> = 0
</pre>
</div>
</div></li></ul>
</div>
<div id="outline-container-orgheadline50" class="outline-4">
<h4 id="orgheadline50"><span class="section-number-4">3.4.4</span> Update informations</h4>
<div class="outline-text-4" id="text-3-4-4">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"update_header"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::processing::event_header_utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"add_header"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
add_header.bank_label : <span class="org-variable-name">string</span> = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Update flag</span>
add_header.update : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The external properties files to be exported in event_header properties</span>
add_header.external_properties_path : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/snsimulation_header.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The external properties prefix to export only properties starting with this prefix</span>
add_header.external_properties_prefix : <span class="org-variable-name">string</span> = <span class="org-string">"analysis"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline73" class="outline-3">
<h3 id="orgheadline73"><span class="section-number-3">3.5</span> Calibration modules</h3>
<div class="outline-text-3" id="text-3-5">
</div>
<div id="outline-container-orgheadline52" class="outline-4">
<h4 id="orgheadline52"><span class="section-number-4">3.5.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-5-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline61" class="outline-4">
<h4 id="tracker_s2c"><a id="orgheadline61"></a><span class="section-number-4">3.5.2</span> Tracker simulation to calibration data</h4>
<div class="outline-text-4" id="text-tracker_s2c">
<p>
This module converts simulated data into calibrated data for SuperNEMO
tracker. It is a mock digitization/calibration data module of Monte-Carlo
hits. It applies some anode/cathode efficiencies as well as calibration and
smearing curves to translate times into longitudinal and transerve
positions. Main reference documents for this module can be find in DocDb <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=786">#786</a>
and <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=843">#843</a>.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"tracker_s2c"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::processing::mock_tracker_s2c_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline53"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline53">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline54"></a>Data bank labels and hit category<br  /><div class="outline-text-5" id="text-orgheadline54">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
EH_label : <span class="org-variable-name">string</span>  = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Simulated Data' bank</span>
SD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The category of hits to be processed as Geiger hits</span>
hit_category  : <span class="org-variable-name">string</span>  = <span class="org-string">"gg"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline55"></a>Random generator<br  /><div class="outline-text-5" id="text-orgheadline55">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Pseudo-random numbers generator setup</span>
random.id   : <span class="org-variable-name">string</span>  = <span class="org-string">"mt19937"</span>
random.seed : <span class="org-variable-name">integer</span> = 12345
</pre>
</div>
</div></li>

<li><a id="orgheadline56"></a>Geiger cells dimensions<br  /><div class="outline-text-5" id="text-orgheadline56">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Drift cell effective/active diameter</span>
cell_diameter : real as <span class="org-variable-name">length</span> = 44.0 mm

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Drift cell effective/active length</span>
cell_length : real as <span class="org-variable-name">length</span> = 2900.0 mm
</pre>
</div>
</div></li>

<li><a id="orgheadline57"></a>Anode/cathode efficiencies<br  /><div class="outline-text-5" id="text-orgheadline57">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description anode efficiency</span>
base_anode_efficiency   : <span class="org-variable-name">real</span> = 1.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description cathode efficiency</span>
base_cathode_efficiency : <span class="org-variable-name">real</span> = 1.0
</pre>
</div>
</div></li>
<li><a id="orgheadline58"></a>Plasma longitudinal speed<br  /><div class="outline-text-5" id="text-orgheadline58">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description plasma longitudinal speed</span>
plasma_longitudinal_speed : real as <span class="org-variable-name">velocity</span> = 5.0 cm/us
</pre>
</div>
</div></li>

<li><a id="orgheadline59"></a>Longitudinal &amp; transerve reconstruction parameters<br  /><div class="outline-text-5" id="text-orgheadline59">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Error on reconstructed longitudinal position (from a plot by Irina)</span>
sigma_z : real as <span class="org-variable-name">length</span> = 1.0 cm <span class="org-comment-delimiter"># </span><span class="org-comment">(to be confirmed)</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Error on reconstructed longitudinal position when one cathode signal is missing</span>
sigma_z_missing_cathode  : real as <span class="org-variable-name">length</span> = 5.0 cm <span class="org-comment-delimiter"># </span><span class="org-comment">(to be confirmed)</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Error on reconstructed horizontal position (parameters of a fit of data by Irina)</span>
sigma_r_a  : real as <span class="org-variable-name">length</span> = 0.425 mm
sigma_r_b  : <span class="org-variable-name">real</span> = 0.0083
sigma_r_r0 : real as <span class="org-variable-name">length</span> = 12.25 mm
</pre>
</div>
</div></li>

<li><a id="orgheadline60"></a>Delayed drift time threshold<br  /><div class="outline-text-5" id="text-orgheadline60">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">#@description Time threshold to tag Geiger cells as delayed</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">delayed_drift_time_threshold : real as time = 10 us</span>
</pre>
</div>
</div></li></ul>
</div>
<div id="outline-container-orgheadline72" class="outline-4">
<h4 id="orgheadline72"><span class="section-number-4">3.5.3</span> Calorimeter simulation to calibration data</h4>
<div class="outline-text-4" id="text-3-5-3">
<p>
This module converts Monte-Carlo hits into calorimeter hits. Like the previous
<a href="#orgheadline61">section</a>, it is a mock digitization/calibration of simulation hits. It basicaly
aggregates several energy deposits, calculates the total energy deposited and
the time of the first energy deposit and finally, it smears the energy and time
by some experimental energy/time resolution. There is also a special treatments
for the quenching of alpha particles.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"calorimeter_s2c"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::processing::mock_calorimeter_s2c_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline62"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline62">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline63"></a>Data bank labels<br  /><div class="outline-text-5" id="text-orgheadline63">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
EH_label : <span class="org-variable-name">string</span>  = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Simulated Data' bank</span>
SD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline64"></a>Random generator<br  /><div class="outline-text-5" id="text-orgheadline64">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Pseudo-random numbers generator setup</span>
random.id   : <span class="org-variable-name">string</span>  = <span class="org-string">"mt19937"</span>
random.seed : <span class="org-variable-name">integer</span> = 12345
</pre>
</div>
</div></li>

<li><a id="orgheadline65"></a>Activate &alpha; quenching<br  /><div class="outline-text-5" id="text-orgheadline65">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Alpha quenching boolean</span>
alpha_quenching : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>
<li><a id="orgheadline71"></a>Calorimeter regimes<br  /><ul class="org-ul"><li><a id="orgheadline66"></a>Hit categories<br  /><div class="outline-text-6" id="text-orgheadline66">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The categories of hits to be processed as calorimeter hits</span>
hit_categories  : <span class="org-variable-name">string</span>[3]  = <span class="org-string">"calo"</span> <span class="org-string">"xcalo"</span> <span class="org-string">"gveto"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline67"></a>&alpha; quenching parameters<br  /><div class="outline-text-6" id="text-orgheadline67">
<p>
We do not use these parameters
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Alpha quenching parameters</span>
calo.alpha_quenching_parameters  : <span class="org-variable-name">real</span>[3] = 77.4 0.639 2.34
xcalo.alpha_quenching_parameters : <span class="org-variable-name">real</span>[3] = 77.4 0.639 2.34
gveto.alpha_quenching_parameters : <span class="org-variable-name">real</span>[3] = 77.4 0.639 2.34
</pre>
</div>
</div></li>

<li><a id="orgheadline68"></a>Scintillator relaxation time for time resolution<br  /><div class="outline-text-6" id="text-orgheadline68">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Time resolution parameters</span>
calo.scintillator_relaxation_time  : real as <span class="org-variable-name">time</span> = 6.0 ns
xcalo.scintillator_relaxation_time : real as <span class="org-variable-name">time</span> = 6.0 ns
gveto.scintillator_relaxation_time : real as <span class="org-variable-name">time</span> = 6.0 ns
</pre>
</div>
</div></li>

<li><a id="orgheadline69"></a>Energy resolutions<br  /><div class="outline-text-6" id="text-orgheadline69">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Optical lines resolutions (FWHM @ 1 MeV)</span>
calo.energy.resolution  : real as <span class="org-variable-name">fraction</span> = @variant(detector:calo_energy_resolution|8 %)
xcalo.energy.resolution : real as <span class="org-variable-name">fraction</span> = @variant(detector:xcalo_energy_resolution|12 %)
gveto.energy.resolution : real as <span class="org-variable-name">fraction</span> = @variant(detector:gveto_energy_resolution|15 %)
</pre>
</div>
</div></li>

<li><a id="orgheadline70"></a>Energy thresholds<br  /><div class="outline-text-6" id="text-orgheadline70">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Optical lines trigger thresholds</span>
calo.energy.high_threshold  : real as <span class="org-variable-name">energy</span> = @variant(detector:calo_high_energy_threshold|150 keV)
xcalo.energy.high_threshold : real as <span class="org-variable-name">energy</span> = @variant(detector:xcalo_high_energy_threshold|150 keV)
gveto.energy.high_threshold : real as <span class="org-variable-name">energy</span> = @variant(detector:gveto_high_energy_threshold|150 keV)

calo.energy.low_threshold   : real as <span class="org-variable-name">energy</span> = @variant(detector:calo_low_energy_threshold|50 keV)
xcalo.energy.low_threshold  : real as <span class="org-variable-name">energy</span> = @variant(detector:xcalo_low_energy_threshold|50 keV)
gveto.energy.low_threshold  : real as <span class="org-variable-name">energy</span> = @variant(detector:gveto_low_energy_threshold|50 keV)
</pre>
</div>
</div></li></ul></li></ul>
</div>
</div>

<div id="outline-container-orgheadline80" class="outline-3">
<h3 id="orgheadline80"><span class="section-number-3">3.6</span> Tracker clustering modules</h3>
<div class="outline-text-3" id="text-3-6">
</div>
<div id="outline-container-orgheadline74" class="outline-4">
<h4 id="orgheadline74"><span class="section-number-4">3.6.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-6-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline79" class="outline-4">
<h4 id="orgheadline79"><span class="section-number-4">3.6.2</span> Clustering algorithms</h4>
<div class="outline-text-4" id="text-3-6-2">
<p>
This section holds different modules all related to tracker clustering.
</p>
</div>

<ul class="org-ul"><li><a id="orgheadline75"></a>Mock tracker clustering<br  /><div class="outline-text-5" id="text-orgheadline75">
<p>
This algorithm is too much simple but it can serve as a comparison point with
respect to more elaborated algorithms in terms of time processing. It basically
associates geiger cells but considering succesive neighbors. It does not use the
longitudinal information and then can badly aggregates track belonging to two
different particles.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"mock_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::mock_tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Tracker Clusterizer logging priority</span>
TC.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of prompt hits</span>
TPC.processing_prompt_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.processing_delayed_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximum layer distance between two neighbour hits</span>
MTC.max_layer_distance : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximum row distance between two neighbour hits</span>
MTC.max_row_distance   : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximum row+layer distance between two neighbour hits</span>
MTC.max_sum_distance   : <span class="org-variable-name">integer</span> = 0
</pre>
</div>
</div></li>



<li><a id="orgheadline76"></a>Cellular Automaton Tracker<br  /><div class="outline-text-5" id="text-orgheadline76">
<p>
This algorithm provides tons of parameters and is based in F. Nova work. A
somewhat complete overview of CAT main features can be seen in DocDb <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=2120">#2120</a>.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"cat_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::cat_tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging support</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of prompt hits</span>
TPC.processing_prompt_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.processing_delayed_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description The time width of the window for collecting candidate clusters of delayed hits (in microsecond)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">TPC.delayed_hit_cluster_time : real = 10.0 # microsec</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Pre-clusterizer processing separately both sides of the tracking chamber</span>
TPC.split_chamber : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description CAT logging level</span>
CAT.level : <span class="org-variable-name">string</span> = <span class="org-string">"mute"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Force the CAT algorithm to consider a 25 gauss magnetic field (temporary trick)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">CAT.magnetic_field : real = 25 gauss</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use calorimeter hits information to help clustering</span>
CAT.process_calo_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Store CAT results as data properties</span>
CAT.store_result_as_properties : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li>

<li><a id="orgheadline77"></a>SULTAN tracker<br  /><div class="outline-text-5" id="text-orgheadline77">
<p>
Federico Nova recently implements a new way to cluster Geiger cells by
translating their intrinsic parameters namely cell position, drift radius and
azimuthal position in Legendre phase space. The idea was originally suggested by
Yorck Ramachers (see <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=2556">DocDB 2256</a>) and Federico added the ability to fit helix
(see <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=2977">DocDB 2977</a> as well as the <a href="http://www.sciencedirect.com/science/article/pii/S0168900208005780">original paper</a>).
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"sultan_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::sultan_tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging support</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of prompt hits</span>
TPC.processing_prompt_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.processing_delayed_hits : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description The time width of the window for collecting candidate clusters of delayed hits (in microsecond)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">TPC.delayed_hit_cluster_time : real = 10.0 # microsec</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.split_chamber : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use calorimeter hits information to help clustering</span>
SULTAN.process_calo_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Clusterize with helix model</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.clusterize_with_helix_model : boolean = true</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Force the SULTAN algorithm to consider a 25 gauss magnetic field (temporary trick)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.magnetic_field : real = 25 gauss</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.max_time : real = 5000 ms</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Use online event display (devel only)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.print_event_display : boolean = false</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.Emin : real  = 120 keV</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.Emax : real  = 3.3 MeV</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.nsigma_r : real  = 3.0</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.nsigma_z : real  = 4.0</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.nofflayers : integer = 1</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.first_event : integer = -1</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.min_ncells_in_cluster : integer = 7</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.ncells_between_triplet_min : integer = 1</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.ncells_between_triplet_range : integer = 3</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.nsigmas : real  = 1.0</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description To be described</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.sigma_z_factor : real  = 1.0</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Clusterize with endpoints</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.use_endpoints : boolean = true</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Clusterize with Legendre transform</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.use_legendre : boolean = false</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Use clocks to time different parts of the software</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">SULTAN.use_clocks : boolean = false</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline78"></a>Tracker Cluster Path&#xa0;&#xa0;&#xa0;<span class="tag"><span class="notworking">notworking</span></span><br  /><div class="outline-text-5" id="text-orgheadline78">
<p>
This algorithm has been developped by Warwick group since June 2012 and mainly
by K. Bhardwaj.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"tcp_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::processing::tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
EH_label : <span class="org-variable-name">string</span>  = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker hits clustering algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"TCP"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The module number</span>
module_number : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The geometry category of the Geiger drift volume</span>
gg_cell_geom_category : <span class="org-variable-name">string</span> = <span class="org-string">"drift_cell_core"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of prompt hits</span>
TPC.processing_prompt_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.processing_delayed_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The time width of the window for collecting candidate clusters of delayed hits (in microsecond)</span>
TPC.delayed_hit_cluster_time : <span class="org-variable-name">real</span> = 10.0 <span class="org-comment-delimiter"># </span><span class="org-comment">microsec</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.split_chamber : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.gamma : <span class="org-variable-name">integer</span> = 3

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.lambda : <span class="org-variable-name">real</span> = 0.1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.join_threshold : <span class="org-variable-name">real</span> = 0.70

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.opt_threshold : <span class="org-variable-name">real</span> = 0.00001

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.lambda_factor : <span class="org-variable-name">real</span> = 1.05

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.smooth : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.max_iterations : <span class="org-variable-name">integer</span> = 1000

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.line_search_freq : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.line_search_points : <span class="org-variable-name">integer</span> = 10

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.check_splits : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.target_cluster : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.max_number_of_clusters_allowed : <span class="org-variable-name">integer</span> = 3

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.verbose : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.refinement_no : <span class="org-variable-name">integer</span> = 5

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.line_tolerance : <span class="org-variable-name">real</span> = 0.39

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.point_tolerance : <span class="org-variable-name">real</span> = 100
</pre>
</div>
</div></li></ul>
</div>
</div>

<div id="outline-container-orgheadline95" class="outline-3">
<h3 id="orgheadline95"><span class="section-number-3">3.7</span> Tracker fitting module</h3>
<div class="outline-text-3" id="text-3-7">
</div>
<div id="outline-container-orgheadline81" class="outline-4">
<h4 id="orgheadline81"><span class="section-number-4">3.7.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-7-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline94" class="outline-4">
<h4 id="orgheadline94"><span class="section-number-4">3.7.2</span> Fitting algorithm</h4>
<div class="outline-text-4" id="text-3-7-2">
<p>
As the time of writing this document, there is only one algorithm well
integrated into SN@ilWare pipeline. It is based on <a href="https://nemo.lpc-caen.in2p3.fr/wiki/trackfit">trackfit</a> originally
developped and tested on NEMO3 data. It is quite an agnostic algorithm in the
sense that it only asked for cells position and drift radius. Fitting process is
done by GSL minimizer to find the global solution given the model: either helix
or line models.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"trackfit_tracker_fitting"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::trackfit_tracker_fitting_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline82"></a>General logging<br  /><div class="outline-text-5" id="text-orgheadline82">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline83"></a>Data bank &amp; services labels<br  /><div class="outline-text-5" id="text-orgheadline83">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Trajectory Data' bank</span>
TTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TTD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline84"></a>General options<br  /><div class="outline-text-5" id="text-orgheadline84">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The maximum number of fits to be saved (0 means all will be kept)</span>
maximum_number_of_fits : <span class="org-variable-name">integer</span> = 0
</pre>
</div>
</div></li>

<li><a id="orgheadline85"></a>Trackfit algorithm<br  /><div class="outline-text-5" id="text-orgheadline85">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker fitting algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"trackfit"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline86"></a>Drift time calibration<br  /><div class="outline-text-6" id="text-orgheadline86">
<p>
For time delayed cluster like alpha particle track, a <i>a posteriori</i> drift time
calibration has to be done to shift the time origin and then calculates the new
cell radius. The <code>drift_time_calibration</code> can be anything if it respects some
object interface rules defines in <code>trackfit::i_drift_time_calibration</code>
class. Here we use the same model as in Section <a href="#orgheadline61">3.5.2</a>.
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Use drift time (re)calibration</span>
drift_time_calibration_label : <span class="org-variable-name">string</span> = <span class="org-string">"snemo"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline87"></a>Fit models<br  /><div class="outline-text-6" id="text-orgheadline87">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Fit models</span>
fitting_models : <span class="org-variable-name">string</span>[2] = <span class="org-string">"line"</span> <span class="org-string">"helix"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline90"></a>Line fit parameters<br  /><ul class="org-ul"><li><a id="orgheadline88"></a>Guess parameters<br  /><div class="outline-text-7" id="text-orgheadline88">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate logging messages for line guess driver</span>
line.guess.logging.priority  : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use max radius (cell size) to construct initial guess point (1) or use the effective drift Geiger distance of the hit (0)</span>
line.guess.use_max_radius    : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Apply a factor (&gt;0) to the max radius (devel mode)</span>
line.guess.max_radius_factor : <span class="org-variable-name">real</span> = 1.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use guess trust (1) or keep all of the guess fits (0) and select later</span>
line.guess.use_guess_trust   : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Mode for trusting a fit guess ("counter", "barycenter")</span>
line.guess.guess_trust_mode  : <span class="org-variable-name">string</span> = <span class="org-string">"counter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Fit the delayed geiger cluster</span>
line.guess.fit_delayed_clusters : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>

<li><a id="orgheadline89"></a>Fit parameters<br  /><div class="outline-text-7" id="text-orgheadline89">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description 'Line' fit only guess ("BB", "BT", "TB", "TT")</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">line.only_guess : string[1] = "TT"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Store only the N solutions with best line fit</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">line.store_number_of_solutions : integer = 2</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Print the status of the fit stepper at each step (devel only)</span>
line.fit.step_print_status : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Plot the 2D view of the fitted data at each step (devel only)</span>
line.fit.step_draw         : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Track fit adds start time as an additionnal parameter to the fit (needs a calibration driver)</span>
line.fit.fit_start_time    : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Track fit recomputes the drift distance from drift time (needs a calibration driver)</span>
line.fit.using_drift_time  : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to begin not tangential to the first hit</span>
line.fit.using_first       : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to end not tangential to the last hit</span>
line.fit.using_last        : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li></ul></li>
<li><a id="orgheadline93"></a>Helix fit parameters<br  /><ul class="org-ul"><li><a id="orgheadline91"></a>Guess parameters<br  /><div class="outline-text-7" id="text-orgheadline91">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate logging messages for helix guess driver</span>
trackfit.helix.guess.logging.priority  : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use max radius (cell size) to construct initial guess point (1) or use the effective drift Geiger distance of the hit (0)</span>
trackfit.helix.guess.use_max_radius    : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Apply a factor (&gt;0) to the max radius (devel mode)</span>
trackfit.helix.guess.max_radius_factor : <span class="org-variable-name">real</span> = 1.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use guess trust (1) or keep all of the guess fits (0) and select later</span>
trackfit.helix.guess.use_guess_trust   : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Mode for trusting a fit guess ("counter", "barycenter")</span>
trackfit.helix.guess.guess_trust_mode  : <span class="org-variable-name">string</span> = <span class="org-string">"counter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Fit the delayed geiger cluster (by default, false since this mode is devoted to line fit)</span>
trackfit.helix.guess.fit_delayed_clusters : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li>
<li><a id="orgheadline92"></a>Fit parameters<br  /><div class="outline-text-7" id="text-orgheadline92">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description 'Helix' fit only guess ("BBB", "BBT", "BTB", "BTT", "TBB", "TBT", "TTB", "TTT")</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">trackfit.helix.only_guess : string[1] = "TTT"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Store only the N solutions with best helix fit</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">trackfit.helix.store_number_of_solutions : integer = 2</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Print the status of the fit stepper at each step (devel only)</span>
trackfit.helix.fit.step_print_status : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Plot the 2D view of the fitted data at each step (devel only)</span>
trackfit.helix.fit.step_draw         : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Track fit recomputes the drift distance from drift time (needs a calibration driver)</span>
trackfit.helix.fit.using_drift_time  : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to begin not tangential to the first hit</span>
trackfit.helix.fit.using_first       : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to end not tangential to the last hit</span>
trackfit.helix.fit.using_last        : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li></ul></li></ul></li></ul>
</div>
</div>

<div id="outline-container-orgheadline105" class="outline-3">
<h3 id="orgheadline105"><span class="section-number-3">3.8</span> Charged particle tracking module</h3>
<div class="outline-text-3" id="text-3-8">
</div>
<div id="outline-container-orgheadline96" class="outline-4">
<h4 id="orgheadline96"><span class="section-number-4">3.8.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-8-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline104" class="outline-4">
<h4 id="orgheadline104"><span class="section-number-4">3.8.2</span> Charged particle tracking</h4>
<div class="outline-text-4" id="text-3-8-2">
<p>
Given results of the two previous steps <i>i.e.</i> clustering and fitting, the
trajectories must be interpreted within SuperNEMO detector geometry. The
particle tracking translates trajectory into particle tracks and then determines
the track charge (assuming particle comes from the source foil), it extrapolates
track intersection with calorimeter walls and finally it associates particle
track with calorimeter blocks.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"charged_particle_tracking"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::charged_particle_tracking_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline97"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline97">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline98"></a>Data banks and services labels<br  /><div class="outline-text-5" id="text-orgheadline98">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Trajectory Data' bank</span>
TTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Particle Track Data' bank</span>
PTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"PTD"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline99"></a>Drivers<br  /><div class="outline-text-5" id="text-orgheadline99">
<p>
The particle track reconstruction is done within several drivers, each one
having a dedicated tasks such as to compute track charge or to associate
particle track with calorimeter block. The way to perform these "actions" is
then decorelated with the pipeline execution. Other algorithms can be
implemented but the particle tracking module will stay unchanged.
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description List of drivers to be used (see description below)</span>
drivers : <span class="org-variable-name">string</span>[4] = <span class="org-string">"VED"</span> <span class="org-string">"CCD"</span> <span class="org-string">"CAD"</span> <span class="org-string">"AFD"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline100"></a>Vertex Extrapolation Driver<br  /><div class="outline-text-6" id="text-orgheadline100">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Vertex Extrapolation Driver logging priority</span>
VED.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use linear extrapolation (not implemented yet)</span>
VED.use_linear_extrapolation : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li>

<li><a id="orgheadline101"></a>Charge Computation Driver<br  /><div class="outline-text-6" id="text-orgheadline101">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Charge Computation Driver logging priority</span>
CCD.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Charge sign convention</span>
CCD.charge_from_source : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>

<li><a id="orgheadline102"></a>Calorimeter Association Driver<br  /><div class="outline-text-6" id="text-orgheadline102">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Calorimeter Association Driver logging priority</span>
CAD.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximum matching distance for track/calo association</span>
CAD.matching_tolerance : real as <span class="org-variable-name">length</span> = 100 mm

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use a simpler approach by looking for gieger cells in front of calo (not implemented yet)</span>
CAD.use_last_geiger_cell : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li>
<li><a id="orgheadline103"></a>Alpha Finder Driver<br  /><div class="outline-text-6" id="text-orgheadline103">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Alpha Finder Driver logging priority</span>
AFD.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li></ul></li></ul>
</div>
</div>
<div id="outline-container-orgheadline123" class="outline-3">
<h3 id="orgheadline123"><span class="section-number-3">3.9</span> &gamma; tracking module</h3>
<div class="outline-text-3" id="text-3-9">
</div>
<div id="outline-container-orgheadline106" class="outline-4">
<h4 id="orgheadline106"><span class="section-number-4">3.9.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-9-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline112" class="outline-4">
<h4 id="orgheadline112"><span class="section-number-4">3.9.2</span> &gamma; clustering</h4>
<div class="outline-text-4" id="text-3-9-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"gamma_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::gamma_clustering_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline107"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline107">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline108"></a>Data banks and services labels<br  /><div class="outline-text-5" id="text-orgheadline108">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Particle Track Data' bank</span>
PTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"PTD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline109"></a>Default options<br  /><div class="outline-text-5" id="text-orgheadline109">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Gamma algorithm logging priority</span>
BGB.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Enable the extrapolation to the source foil</span>
BGB.add_foil_vertex_extrapolation : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal internal probability for foil vertex extrapolation</span>
BGB.add_foil_vertex_minimal_probability : real as <span class="org-variable-name">fraction</span> = 1 %
</pre>
</div>
</div></li>

<li><a id="orgheadline110"></a>Driver<br  /><div class="outline-text-5" id="text-orgheadline110">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description List of drivers to be used (see description below)</span>
driver : <span class="org-variable-name">string</span> = <span class="org-string">"GC"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline111"></a>Cluster properties<br  /><div class="outline-text-5" id="text-orgheadline111">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The time spread between calorimeter hits within a cluster</span>
GC.cluster_time_range : real as <span class="org-variable-name">time</span> = 2.5 ns

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The geometrical condition to cluster calorimeter hits ("side", "diagonal", "first", "second")</span>
GC.cluster_grid_mask : <span class="org-variable-name">string</span> = <span class="org-string">"first"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline122" class="outline-4">
<h4 id="orgheadline122"><span class="section-number-4">3.9.3</span> &gamma; tracking</h4>
<div class="outline-text-4" id="text-3-9-3">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"gamma_tracking"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::gamma_tracking_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline113"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline113">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline114"></a>Data banks and services labels<br  /><div class="outline-text-5" id="text-orgheadline114">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Particle Track Data' bank</span>
PTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"PTD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline115"></a>Driver<br  /><div class="outline-text-5" id="text-orgheadline115">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description List of drivers to be used (see description below)</span>
driver : <span class="org-variable-name">string</span> = <span class="org-string">"GT"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline116"></a>Default options<br  /><div class="outline-text-5" id="text-orgheadline116">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Gamma algorithm logging priority</span>
BGB.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Enable the extrapolation to the source foil</span>
BGB.add_foil_vertex_extrapolation : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal internal probability for foil vertex extrapolation</span>
BGB.add_foil_vertex_minimal_probability : real as <span class="org-variable-name">fraction</span> = 1 %
</pre>
</div>
</div></li>
<li><a id="orgheadline121"></a>&gamma; tracking setup<br  /><ul class="org-ul"><li><a id="orgheadline117"></a>Logging priority<br  /><div class="outline-text-6" id="text-orgheadline117">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
GT.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>
<li><a id="orgheadline118"></a>Minimal probability<br  /><div class="outline-text-6" id="text-orgheadline118">
<p>
The following value sets the minimal TOF probability to accept a pair of
calorimeters.
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal TOF probability</span>
GT.minimal_probability : <span class="org-variable-name">real</span> = 1e-5
</pre>
</div>
</div></li>
<li><a id="orgheadline119"></a>Use probability rather than gamma number<br  /><div class="outline-text-6" id="text-orgheadline119">
<p>
The <code>absolute</code> variable forces the gamma tracking algorithm to choose the
calorimeter assocation in the base of the best probability and not in relation
with the number of gammas.
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Prefer probability rather than size of gamma tracked</span>
GT.use_absolute : <span class="org-variable-name">boolean</span> = false
</pre>
</div>
</div></li>

<li><a id="orgheadline120"></a>Maximum size of the gamma tracked<br  /><div class="outline-text-6" id="text-orgheadline120">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximum size of a gamma tracked</span>
GT.maximal_gamma_size : <span class="org-variable-name">integer</span> = 0
</pre>
</div>
</div></li></ul></li></ul>
</div>
</div>
<div id="outline-container-orgheadline134" class="outline-3">
<h3 id="orgheadline134"><span class="section-number-3">3.10</span> Particle identification module</h3>
<div class="outline-text-3" id="text-3-10">
</div>
<div id="outline-container-orgheadline124" class="outline-4">
<h4 id="orgheadline124"><span class="section-number-4">3.10.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-10-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline133" class="outline-4">
<h4 id="orgheadline133"><span class="section-number-4">3.10.2</span> Module declaration</h4>
<div class="outline-text-4" id="text-3-10-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"particle_identification"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::particle_identification_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline125"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline125">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline126"></a>Data banks and services labels<br  /><div class="outline-text-5" id="text-orgheadline126">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Cut service</span>
Cut_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Particle Track Data' bank</span>
PTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"PTD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline127"></a>Driver<br  /><div class="outline-text-5" id="text-orgheadline127">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description List of drivers to be used (see description below)</span>
drivers : <span class="org-variable-name">string</span>[1] = <span class="org-string">"PID"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline132"></a>PID driver<br  /><ul class="org-ul"><li><a id="orgheadline128"></a>Logging priority<br  /><div class="outline-text-6" id="text-orgheadline128">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority for PID driver</span>
PID.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline129"></a>PID mode<br  /><div class="outline-text-6" id="text-orgheadline129">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The PID mode</span>
PID.mode.label : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>

<li><a id="orgheadline130"></a>Particle definitions<br  /><div class="outline-text-6" id="text-orgheadline130">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of particle identification definition</span>
PID.definitions : <span class="org-variable-name">string</span>[3] = <span class="org-string">"electron_definition"</span> <span class="org-sh-escaped-newline">\</span>
                              <span class="org-string">"gamma_definition"</span>    <span class="org-sh-escaped-newline">\</span>
                              <span class="org-string">"alpha_definition"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline131"></a>Particle labels<br  /><div class="outline-text-6" id="text-orgheadline131">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label associated to 'electron' definition</span>
PID.electron_definition.label : <span class="org-variable-name">string</span> = <span class="org-string">"electron"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label associated to 'gamma' definition</span>
PID.gamma_definition.label : <span class="org-variable-name">string</span> = <span class="org-string">"gamma"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label associated to 'alpha' definition</span>
PID.alpha_definition.label : <span class="org-variable-name">string</span> = <span class="org-string">"alpha"</span>
</pre>
</div>
</div></li></ul></li></ul>
</div>
</div>

<div id="outline-container-orgheadline146" class="outline-3">
<h3 id="orgheadline146"><span class="section-number-3">3.11</span> Topology module</h3>
<div class="outline-text-3" id="text-3-11">
</div>

<div id="outline-container-orgheadline135" class="outline-4">
<h4 id="orgheadline135"><span class="section-number-4">3.11.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-11-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline145" class="outline-4">
<h4 id="orgheadline145"><span class="section-number-4">3.11.2</span> Module declaration</h4>
<div class="outline-text-4" id="text-3-11-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"topology_identification"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::topology_module"</span>]
</pre>
</div>
</div>
<ul class="org-ul"><li><a id="orgheadline136"></a>Logging priority<br  /><div class="outline-text-5" id="text-orgheadline136">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)
</pre>
</div>
</div></li>

<li><a id="orgheadline137"></a>Data banks and services labels<br  /><div class="outline-text-5" id="text-orgheadline137">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Particle Track Data' bank</span>
PTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Topology Data' bank</span>
TD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline138"></a>Drivers<br  /><div class="outline-text-5" id="text-orgheadline138">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description List of drivers to be used (see description below)</span>
drivers : <span class="org-variable-name">string</span>[3] = <span class="org-string">"TOFD"</span> <span class="org-string">"DVD"</span> <span class="org-string">"AMD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline140"></a>Time-Of-Flight driver<br  /><ul class="org-ul"><li><a id="orgheadline139"></a>Logging priority<br  /><div class="outline-text-6" id="text-orgheadline139">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
TOFD.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)
</pre>
</div>
</div></li></ul></li>

<li><a id="orgheadline142"></a>&Delta;vertex driver<br  /><ul class="org-ul"><li><a id="orgheadline141"></a>Logging priority<br  /><div class="outline-text-6" id="text-orgheadline141">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
DVD.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)
</pre>
</div>
</div></li></ul></li>

<li><a id="orgheadline144"></a>&theta; driver<br  /><ul class="org-ul"><li><a id="orgheadline143"></a>Logging priority<br  /><div class="outline-text-6" id="text-orgheadline143">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
AMD.logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)
</pre>
</div>
</div></li></ul></li></ul>
</div>
</div>

<div id="outline-container-orgheadline168" class="outline-3">
<h3 id="orgheadline168"><span class="section-number-3">3.12</span> Chain modules</h3>
<div class="outline-text-3" id="text-3-12">
<p>
This section holds most of the chain module to set "to music" the different
modules and tasks. It also contains the different paths given the selection
requirements. One important point is that module order really matters since a
module, especially <code>chain_module</code>, needs to know the declaration of all the
modules it contains.
</p>
</div>

<div id="outline-container-orgheadline147" class="outline-4">
<h4 id="orgheadline147"><span class="section-number-4">3.12.1</span> Insert preamble</h4>
<div class="outline-text-4" id="text-3-12-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline148" class="outline-4">
<h4 id="orgheadline148"><span class="section-number-4">3.12.2</span> Process after event header selection</h4>
<div class="outline-text-4" id="text-3-12-2">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_event_header_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"list_of_ids_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_header_selected"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_header_non_selected"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline149" class="outline-4">
<h4 id="orgheadline149"><span class="section-number-4">3.12.3</span> Analysis chain</h4>
<div class="outline-text-4" id="text-3-12-3">
<table id="orgtable2" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 2:</span> <b>Modules used by the analysis process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">io_output_particle_track_selected</td>
</tr>

<tr>
<td class="org-left">remove_simulated_data</td>
</tr>

<tr>
<td class="org-left">remove_calibrated_data</td>
</tr>

<tr>
<td class="org-left">remove_tracker_clustering_data</td>
</tr>

<tr>
<td class="org-left">remove_tracker_trajectory_data</td>
</tr>

<tr>
<td class="org-left">io_output_analysed</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"analysis_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[6] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_particle_track_selected"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_simulated_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_calibrated_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_tracker_trajectory_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_analysed"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline150" class="outline-4">
<h4 id="orgheadline150"><span class="section-number-4">3.12.4</span> Process after selecting particle track</h4>
<div class="outline-text-4" id="text-3-12-4">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_particle_track_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"particle_track_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"analysis_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_particle_track_non_selected"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline151" class="outline-4">
<h4 id="orgheadline151"><span class="section-number-4">3.12.5</span> Particle tracking chain</h4>
<div class="outline-text-4" id="text-3-12-5">
<table id="orgtable3" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 3:</span> <b>Modules used by the particle tracking process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">remove_particle_track_data</td>
</tr>

<tr>
<td class="org-left">charged_particle_tracking</td>
</tr>

<tr>
<td class="org-left">gamma_clustering</td>
</tr>

<tr>
<td class="org-left">gamma_tracking</td>
</tr>

<tr>
<td class="org-left">io_output_particle_track</td>
</tr>

<tr>
<td class="org-left">process_with_particle_track_cuts</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"particle_tracking_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[6] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"charged_particle_tracking"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"gamma_clustering"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"gamma_tracking"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_particle_track"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_with_particle_track_cuts"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline152" class="outline-4">
<h4 id="orgheadline152"><span class="section-number-4">3.12.6</span> Process after fitting selection</h4>
<div class="outline-text-4" id="text-3-12-6">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_fitting_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"tracker_trajectory_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"particle_tracking_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_trajectory_non_selected"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline153" class="outline-4">
<h4 id="orgheadline153"><span class="section-number-4">3.12.7</span> Fitting chain</h4>
<div class="outline-text-4" id="text-3-12-7">
<table id="orgtable4" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 4:</span> <b>Modules used by the fitting process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">remove_tracker_trajectory_data</td>
</tr>

<tr>
<td class="org-left">trackfit_tracker_fitting</td>
</tr>

<tr>
<td class="org-left">io_output_tracker_trajectory</td>
</tr>

<tr>
<td class="org-left">process_with_fitting_cuts</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"fitting_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_tracker_trajectory_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"trackfit_tracker_fitting"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_tracker_trajectory"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_with_fitting_cuts"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline154" class="outline-4">
<h4 id="orgheadline154"><span class="section-number-4">3.12.8</span> Process after clustering selection</h4>
<div class="outline-text-4" id="text-3-12-8">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_clustering_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"tracker_clustering_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"fitting_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_clustering_non_selected"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline155" class="outline-4">
<h4 id="orgheadline155"><span class="section-number-4">3.12.9</span> Clustering chain</h4>
<div class="outline-text-4" id="text-3-12-9">
<table id="orgtable5" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 5:</span> <b>Modules used by the clustering process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">remove_tracker_clustering_data</td>
</tr>

<tr>
<td class="org-left">cat_tracker_clustering</td>
</tr>

<tr>
<td class="org-left">io_output_tracker_clustering</td>
</tr>

<tr>
<td class="org-left">process_with_clustering_cuts</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"clustering_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"cat_tracker_clustering"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_tracker_clustering"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_with_clustering_cuts"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline156" class="outline-4">
<h4 id="orgheadline156"><span class="section-number-4">3.12.10</span> Process after calibration selection</h4>
<div class="outline-text-4" id="text-3-12-10">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_calibrated_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"calibrated_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"clustering_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_calibrated_non_selected"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline157" class="outline-4">
<h4 id="orgheadline157"><span class="section-number-4">3.12.11</span> Calibration chain</h4>
<div class="outline-text-4" id="text-3-12-11">
<table id="orgtable6" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 6:</span> <b>Modules used by the calibration process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">add_header</td>
</tr>

<tr>
<td class="org-left">tracker_s2c</td>
</tr>

<tr>
<td class="org-left">calorimeter_s2c</td>
</tr>

<tr>
<td class="org-left">io_output_calibrated</td>
</tr>

<tr>
<td class="org-left">process_with_calibrated_cuts</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"calibration_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[5] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"add_header"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"tracker_s2c"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"calorimeter_s2c"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_calibrated"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_with_calibrated_cuts"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline158" class="outline-4">
<h4 id="orgheadline158"><span class="section-number-4">3.12.12</span> Process after simulation selection</h4>
<div class="outline-text-4" id="text-3-12-12">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_simulated_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"simulated_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"calibration_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_simulated_non_selected"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline159" class="outline-4">
<h4 id="orgheadline159"><span class="section-number-4">3.12.13</span> Simulation chain</h4>
<div class="outline-text-4" id="text-3-12-13">
<table id="orgtable7" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 7:</span> <b>Modules used by the simulation process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">simulation</td>
</tr>

<tr>
<td class="org-left">io_output_simulated</td>
</tr>

<tr>
<td class="org-left">process_with_simulated_cuts</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"simulation_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[3] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"simulation"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_simulated"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_with_simulated_cuts"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline160" class="outline-4">
<h4 id="orgheadline160"><span class="section-number-4">3.12.14</span> Full chain (from simulation &rarr; calibration &rarr; reconstruction)</h4>
<div class="outline-text-4" id="text-3-12-14">
<table id="orgtable8" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 8:</span> <b>Full chain processing.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">simulation_chain</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"full_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[1] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"simulation_chain"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline161" class="outline-4">
<h4 id="orgheadline161"><span class="section-number-4">3.12.15</span> Minimum bias chain (from simulation &rarr; calibration &rarr; reconstruction)</h4>
<div class="outline-text-4" id="text-3-12-15">
<table id="orgtable9" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 9:</span> <b>Full chain processing without selection.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">simulation</td>
</tr>

<tr>
<td class="org-left">add_header</td>
</tr>

<tr>
<td class="org-left">tracker_s2c</td>
</tr>

<tr>
<td class="org-left">calorimeter_s2c</td>
</tr>

<tr>
<td class="org-left">cat_tracker_clustering</td>
</tr>

<tr>
<td class="org-left">trackfit_tracker_fitting</td>
</tr>

<tr>
<td class="org-left">charged_particle_tracking</td>
</tr>

<tr>
<td class="org-left">gamma_clustering</td>
</tr>

<tr>
<td class="org-left">particle_identification</td>
</tr>

<tr>
<td class="org-left">topology_identification</td>
</tr>

<tr>
<td class="org-left">io_output_analysed</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"minimum_bias_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[11] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"simulation"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"add_header"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"tracker_s2c"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"calorimeter_s2c"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"cat_tracker_clustering"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"trackfit_tracker_fitting"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"charged_particle_tracking"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"gamma_clustering"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"particle_identification"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"topology_identification"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"io_output_analysed"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline167" class="outline-4">
<h4 id="orgheadline167"><span class="section-number-4">3.12.16</span> Channel chain</h4>
<div class="outline-text-4" id="text-3-12-16">
</div><ul class="org-ul"><li><a id="orgheadline162"></a>2&beta; selection<br  /><div class="outline-text-5" id="text-orgheadline162">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_2e_channel_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_2e_channel_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_2e_channel_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_2e_channel_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"process_2e_channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"2e::channel_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_2e_channel_selected"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_2e_channel_non_selected"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline163"></a>1&beta; selection<br  /><div class="outline-text-5" id="text-orgheadline163">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_1e_channel_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e_channel_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_1e_channel_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e_channel_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"process_1e_channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"1e::channel_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e_channel_selected"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e_channel_non_selected"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline164"></a>1&beta;/1&gamma; selection<br  /><div class="outline-text-5" id="text-orgheadline164">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_1e1g_channel_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1g_channel_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_1e1g_channel_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1g_channel_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"process_1e1g_channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"1e1g::channel_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1g_channel_selected"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1g_channel_non_selected"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline165"></a>1&beta;/1&alpha; selection<br  /><div class="outline-text-5" id="text-orgheadline165">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_1e1a_channel_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1a_channel_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_1e1a_channel_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.path : string as <span class="org-variable-name">path</span> = @variant(core:output_path|<span class="org-string">"/tmp/${USER}/snemo.d/"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename to output data file</span>
files.single.filename : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1a_channel_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"process_1e1a_channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"1e1a::channel_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1a_channel_selected"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_1e1a_channel_non_selected"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline166"></a>Full topology<br  /><div class="outline-text-5" id="text-orgheadline166">
<table id="orgtable10" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 10:</span> <b>Topology chain.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">minimum_bias_chain</td>
</tr>

<tr>
<td class="org-left">process_2e_channel_cut</td>
</tr>

<tr>
<td class="org-left">process_1e_channel_cut</td>
</tr>

<tr>
<td class="org-left">process_1e1g_channel_cut</td>
</tr>

<tr>
<td class="org-left">process_1e1a_channel_cut</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"channel_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[5] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"minimum_bias_chain"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_2e_channel_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_1e_channel_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_1e1g_channel_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"process_1e1a_channel_cut"</span>
</pre>
</div>
</div></li></ul>
</div>
</div>
<div id="outline-container-orgheadline169" class="outline-3">
<h3 id="orgheadline169"><span class="section-number-3">3.13</span> Miscellaneous</h3>
<div class="outline-text-3" id="text-3-13">
<table id="orgtable11" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 11:</span> <b>Reformating data.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">remove_header</td>
</tr>

<tr>
<td class="org-left">add_header</td>
</tr>

<tr>
<td class="org-left">remove_mc_visu_hits</td>
</tr>

<tr>
<td class="org-left">remove_simulated_data</td>
</tr>

<tr>
<td class="org-left">remove_calibrated_data</td>
</tr>

<tr>
<td class="org-left">remove_tracker_clustering_data</td>
</tr>

<tr>
<td class="org-left">remove_tracker_trajectory_data</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"reformat_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[7] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_header"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"add_header"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_mc_visu_hits"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_simulated_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_calibrated_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"remove_tracker_trajectory_data"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3"><span class="section-number-2">4</span> Services</h2>
<div class="outline-text-2" id="text-4">
<p>
A service generally hosts a specific resource that can be shared by many other
software components, including other services or data processing modules (see
<a href="https://nemo.lpc-caen.in2p3.fr/wiki/SNSW_SNailWare_FAQ#Whatisaservice">SN@ilWare FAQ</a>).
</p>

<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline170" class="outline-3">
<h3 id="orgheadline170"><span class="section-number-3">4.1</span> Context service</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"Ctx"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::context_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description File from which the context is to be loaded at program start</span>
load.file : string as <span class="org-variable-name">path</span>  = <span class="org-string">"/tmp/${USER}/snemo.d/snemo_context.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description File to store the context at program termination</span>
store.file : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/snemo_context_end.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Flag to backup the former context load file</span>
backup.file : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/snemo_context_bak.conf"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline171" class="outline-3">
<h3 id="orgheadline171"><span class="section-number-3">4.2</span> Geometry service</h3>
<div class="outline-text-3" id="text-4-2">
<p>
The following code block declares the geometry service to properly load all the
geometry and material construction of the detector. This service, only declared
here, can be used by several operations like calibration, particle track
reconstruction &#x2026; but all of them will use the same geometry.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"Geo"</span> <span class="org-variable-name">type</span>=<span class="org-string">"geomtools::geometry_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded SuperNEMO geometry manager main configuration file</span>
manager.configuration_file : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/sngeometry_manager.conf"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">"@falaise:config/snemo/demonstrator/geometry/3.0/manager.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded SuperNEMO geometry manager must build its mapping lookup table</span>
manager.build_mapping : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded geometry manager's mapping lookup table does not exclude any geometry category</span>
manager.no_excluded_categories : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline219" class="outline-3">
<h3 id="orgheadline219"><span class="section-number-3">4.3</span> Cuts service</h3>
<div class="outline-text-3" id="text-4-3">
<p>
The <a href="https://nemo.lpc-caen.in2p3.fr/wiki/cuts">cuts</a> package provides some basic classes and utilities to design, create and
apply selection cuts on arbitrary data models.
</p>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"Cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::cut_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The main configuration file for the embedded cut manager</span>
cut_manager.config : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/cut_manager.conf"</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline172" class="outline-4">
<h4 id="orgheadline172"><span class="section-number-4">4.3.1</span> Manager configuration</h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Print a final report of cut efficiencies</span>
print_report : <span class="org-variable-name">string</span> = <span class="org-string">"table"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Flag to skip the preloading of pre-registered cuts</span>
factory.no_preload : <span class="org-variable-name">boolean</span> = false

<span class="org-comment-delimiter">#</span><span class="org-comment">@description A list of files that contains definition of cuts</span>
cuts.configuration_files : string[8] as <span class="org-variable-name">path</span> =                         <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/event_header_cuts.conf"</span>            <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/simulated_data_cuts.conf"</span>          <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/calibrated_data_cuts.conf"</span>         <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/tracker_clustering_data_cuts.conf"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/tracker_trajectory_data_cuts.conf"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/particle_track_data_cuts.conf"</span>     <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/pid_cuts.conf"</span>                     <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"@SNEMO_SIMULATION_CONFIGURATION@/topology_cuts.conf"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline174" class="outline-4">
<h4 id="orgheadline174"><span class="section-number-4">4.3.2</span> Event header cut</h4>
<div class="outline-text-4" id="text-4-3-2">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline173"></a>List of event ids<br  /><div class="outline-text-5" id="text-orgheadline173">
<div class="org-src-container">

<pre class="src src-shell">0_50
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"list_of_ids_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::event_header_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select event following a list of event ids"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"debug"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the event header' bank (mandatory)</span>
EH_label : <span class="org-variable-name">string</span> = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate list of event ids mode</span>
mode.list_of_event_ids : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Filename with event id</span>
list_of_event_ids.file : string as <span class="org-variable-name">path</span> = <span class="org-string">"./test.lis"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline177" class="outline-4">
<h4 id="orgheadline177"><span class="section-number-4">4.3.3</span> Simulated data selection</h4>
<div class="outline-text-4" id="text-4-3-3">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline175"></a>Check bank availability<br  /><div class="outline-text-5" id="text-orgheadline175">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_simulated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"SD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline176"></a>Multiple cuts<br  /><div class="outline-text-5" id="text-orgheadline176">
<p>
This cuts puts together all the previous declared cuts.
</p>
<table id="orgtable12" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 12:</span> <b>Multi selection for validating simulation process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">has_simulated_data</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"simulated_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[1] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_simulated_data"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline185" class="outline-4">
<h4 id="orgheadline185"><span class="section-number-4">4.3.4</span> Calibrated data selection</h4>
<div class="outline-text-4" id="text-4-3-4">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline178"></a>Check bank availability<br  /><div class="outline-text-5" id="text-orgheadline178">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_calibrated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline179"></a>Check calibrated calorimeter availability<br  /><div class="outline-text-5" id="text-orgheadline179">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_cd_calorimeter"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select calibrated calorimeter hit"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_hit_category : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the MC hit category to be checked</span>
has_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"calorimeter"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"!has_cd_calorimeter"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cut to be negated (mandatory)</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"has_cd_calorimeter"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline180"></a>Select number of calibrated calorimeter hits<br  /><div class="outline-text-5" id="text-orgheadline180">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"cd_calorimeter_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select a given number of calibrated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of calibrated hits</span>
mode.range_hit_category : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the hit category to be checked</span>
range_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"calorimeter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of calibrated hits in the choosen category</span>
range_hit_category.min : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of calibrated hits in the choosen category</span>
range_hit_category.max : <span class="org-variable-name">integer</span> = 2
</pre>
</div>
</div></li>

<li><a id="orgheadline181"></a>Check calibrated tracker availability<br  /><div class="outline-text-5" id="text-orgheadline181">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_cd_tracker"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select calibrated tracker hit"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_hit_category : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the hit category to be checked</span>
has_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"tracker"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"!has_cd_tracker"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cut to be negated (mandatory)</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"has_cd_tracker"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline182"></a>Select number of calibrated tracker hits<br  /><div class="outline-text-5" id="text-orgheadline182">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"cd_tracker_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select a given number of calibrated tracker hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of calibrated hits</span>
mode.range_hit_category : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the hit category to be checked</span>
range_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"tracker"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of calibrated hits in the choosen category</span>
range_hit_category.min : <span class="org-variable-name">integer</span> = 3

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of calibrated hits in the choosen category</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">range_hit_category.max : integer = 1</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline183"></a>Remove delayed calibrated tracker hits<br  /><div class="outline-text-5" id="text-orgheadline183">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_delayed_tracker_hit"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select delayed calibrated tracker hit"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for delayed trait bit</span>
mode.tracker_hit_is_delayed : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Delayed time of the tracker hit</span>
tracker_hit_is_delayed.delay_time : real as <span class="org-variable-name">time</span> = 15 us
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"!has_delayed_tracker_hit"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cut to be negated (mandatory)</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"has_delayed_tracker_hit"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline184"></a>Multiple cuts<br  /><div class="outline-text-5" id="text-orgheadline184">
<p>
This cuts puts together all the previous declared cuts.
</p>
<table id="orgtable13" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 13:</span> <b>Multi selection for validating calibration process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">has_calibrated_data</td>
</tr>

<tr>
<td class="org-left">has_cd_calorimeter</td>
</tr>

<tr>
<td class="org-left">cd_calorimeter_cut</td>
</tr>

<tr>
<td class="org-left">has_cd_tracker</td>
</tr>

<tr>
<td class="org-left">cd_tracker_cut</td>
</tr>

<tr>
<td class="org-left">!has_delayed_tracker_hit</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"calibrated_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[6] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_calibrated_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_cd_calorimeter"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"cd_calorimeter_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_cd_tracker"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"cd_tracker_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"!has_delayed_tracker_hit"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline195" class="outline-4">
<h4 id="orgheadline195"><span class="section-number-4">4.3.5</span> Tracker clustering data selection</h4>
<div class="outline-text-4" id="text-4-3-5">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline186"></a>Check bank availability<br  /><div class="outline-text-5" id="text-orgheadline186">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_tracker_clustering_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline187"></a>Check if clusters have been performed<br  /><div class="outline-text-5" id="text-orgheadline187">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_cluster"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check tracker cluster presence"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check of clusters presence</span>
mode.has_cluster : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>
<li><a id="orgheadline188"></a>Select number of cluster<br  /><div class="outline-text-5" id="text-orgheadline188">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"cluster_range_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select a given number of tracker clusters"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of clusters</span>
mode.range_cluster : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of clusters</span>
range_cluster.min : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of clusters</span>
range_cluster.max : <span class="org-variable-name">integer</span> = 4
</pre>
</div>
</div></li>

<li><a id="orgheadline189"></a>Select number of hit within a cluster&#xa0;&#xa0;&#xa0;<span class="tag"><span class="notused">notused</span></span><br  /><div class="outline-text-5" id="text-orgheadline189">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"tcd2_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of clusters</span>
mode.range_tracker_hit : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of cells in cluster</span>
range_tracker_hit.min : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Maximal number of cells in cluster</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">range_tracker_hit.max : integer = 100000</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline190"></a>"Selecting" unclustered hits<br  /><div class="outline-text-5" id="text-orgheadline190">
<p>
We define a serie of cut to remove event with too much unclustered hits. We
first define a cut to check is there is some unclustered hits. If yes, then we
ask tracker cluster solution to have more than 4 unclustered hits. Finally,
since we want to remove thess events, we build a <code>nor_cut</code> to keep
</p>
</div>
<ul class="org-ul"><li><a id="orgheadline191"></a>Check if unclustered hits remain<br  /><div class="outline-text-6" id="text-orgheadline191">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_unclustered_hits"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check unclustered hits presence"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check of unclustered hits</span>
mode.has_unclustered_hits : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>
<li><a id="orgheadline192"></a>Select number of unclustered hits<br  /><div class="outline-text-6" id="text-orgheadline192">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"unclustered_hits_range_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select a given number of unclustered hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of unclustered hits</span>
mode.range_unclustered_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of unclustured hits</span>
range_unclustered_hits.min : <span class="org-variable-name">integer</span> = 4
</pre>
</div>
</div></li>

<li><a id="orgheadline193"></a>No unclustered hits nor large number of unclustered hits<br  /><div class="outline-text-6" id="text-orgheadline193">
<table id="orgtable14" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 14:</span> <b>Multi-selection for getting unclustering hits.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">has_unclustered_hits</td>
</tr>

<tr>
<td class="org-left">unclustered_hits_range_cut</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"range_unclustered_hits"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[2] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_unclustered_hits"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"unclustered_hits_range_cut"</span>
</pre>
</div>

<p>
Now that we have selected tracker clustering solution with large number of
unclustered hits, use the negation of this cut to keep event with low number of
unclustered hits.
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"!range_unclustered_hits"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Remove event with large number of unclustered hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description  The name of the cut to be negated</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"range_unclustered_hits"</span>
</pre>
</div>
</div></li></ul></li>

<li><a id="orgheadline194"></a>Multiple cuts<br  /><div class="outline-text-5" id="text-orgheadline194">
<table id="orgtable15" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 15:</span> <b>Multi-selection for validating tracker clustering process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">has_tracker_clustering_data</td>
</tr>

<tr>
<td class="org-left">has_cluster</td>
</tr>

<tr>
<td class="org-left">cluster_range_cut</td>
</tr>

<tr>
<td class="org-left">!range_unclustered_hits</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"tracker_clustering_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_cluster"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"cluster_range_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"!range_unclustered_hits"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline200" class="outline-4">
<h4 id="orgheadline200"><span class="section-number-4">4.3.6</span> Tracker trajectory data selection</h4>
<div class="outline-text-4" id="text-4-3-6">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline196"></a>Check bank availability<br  /><div class="outline-text-5" id="text-orgheadline196">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_tracker_trajectory_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of TTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"TTD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline197"></a>Check for default solution<br  /><div class="outline-text-5" id="text-orgheadline197">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_solution_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::tracker_trajectory_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select event with default solution"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker trajectory data' bank (mandatory)</span>
TTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for default solution</span>
mode.has_solution : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>

<li><a id="orgheadline198"></a>Select only good trajectories<br  /><div class="outline-text-5" id="text-orgheadline198">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"pvalue_range_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::tracker_trajectory_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select event with good p-value trajectory"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker trajectory data' bank (mandatory)</span>
TTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for good p-value trajectories</span>
mode.range_pvalue : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal value for p-value</span>
range_pvalue.min : real as <span class="org-variable-name">fraction</span> = 10 %
</pre>
</div>
</div></li>

<li><a id="orgheadline199"></a>Multiple cuts<br  /><div class="outline-text-5" id="text-orgheadline199">
<table id="orgtable16" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 16:</span> <b>Multi-selection for validating tracker trajectory process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">has_tracker_trajectory_data</td>
</tr>

<tr>
<td class="org-left">has_solution_cut</td>
</tr>

<tr>
<td class="org-left">pvalue_range_cut</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"tracker_trajectory_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[3] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_tracker_trajectory_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_solution_cut"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"pvalue_range_cut"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline206" class="outline-4">
<h4 id="orgheadline206"><span class="section-number-4">4.3.7</span> Particle track selection</h4>
<div class="outline-text-4" id="text-4-3-7">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="orgheadline201"></a>Check bank availability<br  /><div class="outline-text-5" id="text-orgheadline201">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline202"></a>Check if particles have been reconstructed<br  /><div class="outline-text-5" id="text-orgheadline202">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_particle"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select reconstructed particle"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_particles : <span class="org-variable-name">boolean</span> = true
</pre>
</div>
</div></li>
<li><a id="orgheadline203"></a>Select number of particles<br  /><div class="outline-text-5" id="text-orgheadline203">
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"range_particle"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select a number of particle tracks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of particles trajectories</span>
mode.range_particles : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of particle track</span>
range_particles.min : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of particle track</span>
range_particles.max : <span class="org-variable-name">integer</span> = 2
</pre>
</div>
</div></li>

<li><a id="orgheadline204"></a>No isolated calorimeter hits<br  /><div class="outline-text-5" id="text-orgheadline204">
<p>
Remove event with non associated calorimeters hits.
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"has_non_associated_calorimeter_hits"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select event with non associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for non associated calorimeter hits</span>
mode.has_non_associated_calorimeter_hits : <span class="org-variable-name">boolean</span> = true
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"!has_non_associated_calorimeter_hits"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cut to be negated (mandatory)</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"has_non_associated_calorimeter_hits"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline205"></a>Multiple cuts<br  /><div class="outline-text-5" id="text-orgheadline205">
<table id="orgtable17" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 17:</span> <b>Multi-selection for validating particle tracking process.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">has_particle_track_data</td>
</tr>

<tr>
<td class="org-left">has_particle</td>
</tr>

<tr>
<td class="org-left">range_particle</td>
</tr>

<tr>
<td class="org-left">!has_non_associated_calorimeter_hits</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"particle_track_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"has_particle"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"range_particle"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"!has_non_associated_calorimeter_hits"</span>
</pre>
</div>
</div></li></ul>
</div>
<div id="outline-container-orgheadline212" class="outline-4">
<h4 id="orgheadline212"><span class="section-number-4">4.3.8</span> PID selection</h4>
<div class="outline-text-4" id="text-4-3-8">
<p>
The following cut defines what may be called a "particle" <i>i.e.</i> an electron, an
alpha in the context of SuperNEMO. Since these cuts apply on every
<code>particle_track</code>, <b>they must be cuts from <code>particle_track_cut</code> type</b>.
</p>
</div>

<ul class="org-ul"><li><a id="orgheadline207"></a>Insert preamble<br  /><div class="outline-text-5" id="text-orgheadline207">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div></li>
<li><a id="orgheadline208"></a>Generic definition<br  /></li>

<li><a id="orgheadline209"></a>\(e^-\) definition<br  /><div class="outline-text-5" id="text-orgheadline209">
<p>
An electron is a <code>particle_track</code> having
</p>
<ul class="org-ul">
<li><p>
a negative electric charge
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"electron::negative_charge"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check negative charged track"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_charge : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Request negative charged particle</span>
has_charge.type : <span class="org-variable-name">string</span> = <span class="org-string">"negative"</span>
</pre>
</div></li>
<li><p>
a vertex on the source foil
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"electron::foil_vertex"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has foil vertex"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_vertex : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Request foil vertex</span>
has_vertex.type : <span class="org-variable-name">string</span> = <span class="org-string">"foil"</span>
</pre>
</div></li>
<li><p>
an associated calorimeter hit
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"electron::calorimeter_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_associated_calorimeter_hits : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>
</ul>

<table id="orgtable18" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 18:</span> <b>Selections used to define an electron track.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">electron::negative_charge</td>
</tr>

<tr>
<td class="org-left">electron::calorimeter_association</td>
</tr>

<tr>
<td class="org-left">electron::foil_vertex</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"electron_definition"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[3] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"electron::negative_charge"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"electron::calorimeter_association"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"electron::foil_vertex"</span>
</pre>
</div>

<p>
<i>Addendum</i>
</p>

<p>
If you want to select only main wall and/or X-wall calorimeter hits for electron,
you can declare to <code>particle_track_cut</code> cut with
<code>range_associated_calorimeter_hits</code> mode enabled and then use the <code>multi_or</code> cut
from <code>i_cut</code> library. For instance,
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"electron::calo_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has a range of associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.range_associated_calorimeter_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The calorimeter category to be checked</span>
range_associated_calorimeter_hits.category : <span class="org-variable-name">string</span> = <span class="org-string">"calo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The minimal number of calorimeter associated</span>
range_associated_calorimeter_hits.min : <span class="org-variable-name">integer</span> = 1


[<span class="org-variable-name">name</span>=<span class="org-string">"electron::xcalo_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has a range of associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.range_associated_calorimeter_hits : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The calorimeter category to be checked</span>
range_associated_calorimeter_hits.category : <span class="org-variable-name">string</span> = <span class="org-string">"xcalo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The minimal number of calorimeter associated</span>
range_associated_calorimeter_hits.min : <span class="org-variable-name">integer</span> = 1
</pre>
</div>

<table id="orgtable19" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 19:</span> <b>Selections used to select electron with <code>calo</code> or <code>xcalo</code> associated.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">electron::calo_association</td>
</tr>

<tr>
<td class="org-left">electron::xcalo_association</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"electron::calos_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_or_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-or cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[2] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"electron::calo_association"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"electron::xcalo_association"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline210"></a>&gamma; definition<br  /><div class="outline-text-5" id="text-orgheadline210">
<p>
A gamma is a <code>particle_track</code> having
</p>
<ul class="org-ul">
<li><p>
a neutral electric charge
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"gamma::neutral_charge"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check neutral charged track"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_charge : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Request neutral charged particle</span>
has_charge.type : <span class="org-variable-name">string</span> = <span class="org-string">"neutral"</span>
</pre>
</div></li>
<li><p>
an associated calorimeter hit
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"gamma::calo_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_associated_calorimeter_hits : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>
</ul>

<table id="orgtable20" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 20:</span> <b>Selections used to define a gamma track.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">gamma::neutral_charge</td>
</tr>

<tr>
<td class="org-left">gamma::calo_association</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"gamma_definition"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[2] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"gamma::neutral_charge"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"gamma::calo_association"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline211"></a>&alpha; definition<br  /><div class="outline-text-5" id="text-orgheadline211">
<p>
An alpha is a <code>particle_track</code> having
</p>
<ul class="org-ul">
<li><p>
a undefined electric charge <i>i.e.</i> fitted by a line
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"alpha::undefined_charge"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check undefined charged track"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_charge : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Request undefined charged particle</span>
has_charge.type : <span class="org-variable-name">string</span> = <span class="org-string">"undefined"</span>
</pre>
</div></li>
<li><p>
a delayed cluster
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"alpha::delayed_cluster"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check delayed cluster"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_delayed_cluster : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>
<li><p>
a vertex on the source foil
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"alpha::foil_vertex"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has foil vertex"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_vertex : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Request foil vertex</span>
has_vertex.type : <span class="org-variable-name">string</span> = <span class="org-string">"foil"</span>
</pre>
</div></li>
<li><p>
no associated calorimeter hits
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"alpha::calo_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_associated_calorimeter_hits : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"alpha::no_calo_association"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check if track has no associated calorimeter hits"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the cut to be negated</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"alpha::calo_association"</span>
</pre>
</div></li>
</ul>

<table id="orgtable21" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 21:</span> <b>Selections used to define an alpha track.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">alpha::delayed_cluster</td>
</tr>

<tr>
<td class="org-left">alpha::undefined_charge</td>
</tr>

<tr>
<td class="org-left">alpha::no_calo_association</td>
</tr>

<tr>
<td class="org-left">alpha::foil_vertex</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"alpha_definition"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[3] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"alpha::delayed_cluster"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"alpha::undefined_charge"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"alpha::no_calo_association"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"alpha::foil_vertex"</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline218" class="outline-4">
<h4 id="orgheadline218"><span class="section-number-4">4.3.9</span> Channel selection</h4>
<div class="outline-text-4" id="text-4-3-9">
<p>
The following selections define some basic "standard" channel cuts such as :
</p>
<ul class="org-ul">
<li>2 electrons,</li>
<li>1 electron,</li>
<li>1 electron, \(n\) gammas,</li>
<li>2 electron, \(n\) gammas,</li>
<li>1 electron, 1 alpha particle</li>
</ul>
<p>
and maybe more in the future.
</p>
</div>

<ul class="org-ul"><li><a id="orgheadline213"></a>Insert preamble<br  /><div class="outline-text-5" id="text-orgheadline213">
<div class="org-src-container">

<pre class="src src-shell"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline214"></a>2&beta; selection<br  /><div class="outline-text-5" id="text-orgheadline214">
<p>
Define 2&beta; events channel
</p>
<ul class="org-ul">
<li><p>
generic cuts :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"2e::has_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"2e::has_particles"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select reconstructed particle for 2e topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_particles : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"2e::has_pattern_id"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Ensure pattern id presence for 2e topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_pattern_id : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>

<li><p>
select 2 electrons event topology :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"2e::topology_pattern"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select 2 electrons topology pattern"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for pattern id label</span>
mode.pattern_id : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Label of the topology pattern id</span>
pattern_id.label : <span class="org-variable-name">string</span> = <span class="org-string">"2e"</span>
</pre>
</div></li>

<li><p>
select events with internal probability :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"2e::has_internal_probability"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::channel_2e_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select events with internal probability"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority'</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for internal probability</span>
mode.has_internal_probability : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>

<li><p>
select events with good internal probability :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"2e::range_internal_probability"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::channel_2e_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select good internal probability"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority'</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for internal probability value</span>
mode.range_internal_probability : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal value for internal probability</span>
range_internal_probability.min : real as <span class="org-variable-name">fraction</span> = 1 %
</pre>
</div></li>
</ul>

<p>
The following cut combines all the previous ones to define what 2 electrons
events are
</p>
<table id="orgtable22" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 22:</span> <b>Definition of 2 electrons channel.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">2e::has_particle_track_data</td>
</tr>

<tr>
<td class="org-left">2e::has_particles</td>
</tr>

<tr>
<td class="org-left">2e::has_pattern_id</td>
</tr>

<tr>
<td class="org-left">2e::topology_pattern</td>
</tr>

<tr>
<td class="org-left">2e::has_internal_probability</td>
</tr>

<tr>
<td class="org-left">2e::range_internal_probability</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"2e::channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[6] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"2e::has_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"2e::has_particles"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"2e::has_pattern_id"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"2e::topology_pattern"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"2e::has_internal_probability"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"2e::range_internal_probability"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline215"></a>1&beta; selection<br  /><div class="outline-text-5" id="text-orgheadline215">
<p>
Define 1&beta; events channel
</p>

<ul class="org-ul">
<li><p>
generic cuts :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e::has_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"1e::has_particles"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select reconstructed particle for 1e topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_particles : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"1e::has_pattern_id"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Ensure pattern id presence for 1e topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_pattern_id : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>

<li><p>
select 1 electron event topology :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e::topology_pattern"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select 1 electron topology events"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for pattern id label</span>
mode.pattern_id : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Label of the topology pattern id</span>
pattern_id.label : <span class="org-variable-name">string</span> = <span class="org-string">"1e"</span>
</pre>
</div></li>
</ul>

<table id="orgtable23" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 23:</span> <b>Definition of 1 electron channel.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">1e::has_particle_track_data</td>
</tr>

<tr>
<td class="org-left">1e::has_particles</td>
</tr>

<tr>
<td class="org-left">1e::has_pattern_id</td>
</tr>

<tr>
<td class="org-left">1e::topology_pattern</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e::channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e::has_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e::has_particles"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e::has_pattern_id"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e::topology_pattern"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline216"></a>1&beta;1&gamma; selection<br  /><div class="outline-text-5" id="text-orgheadline216">
<p>
Define 1&beta;1&gamma; events channel
</p>

<ul class="org-ul">
<li><p>
generic cuts :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e1g::has_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"1e1g::has_particles"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select reconstructed particle for 1e1g topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_particles : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"1e1g::has_pattern_id"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Ensure pattern id presence for 1e1g topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_pattern_id : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>

<li><p>
select 1 electron, 1 gamma event topology :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e1g::topology_pattern"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select 1 electron/1 gamma topology events"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for pattern id label</span>
mode.pattern_id : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Label of the topology pattern id</span>
pattern_id.label : <span class="org-variable-name">string</span> = <span class="org-string">"1e1g"</span>
</pre>
</div></li>
</ul>

<table id="orgtable24" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 24:</span> <b>Definition of 1&beta;1&gamma; channel.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">1e1g::has_particle_track_data</td>
</tr>

<tr>
<td class="org-left">1e1g::has_particles</td>
</tr>

<tr>
<td class="org-left">1e1g::has_pattern_id</td>
</tr>

<tr>
<td class="org-left">1e1g::topology_pattern</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e1g::channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1g::has_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1g::has_particles"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1g::has_pattern_id"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1g::topology_pattern"</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline217"></a>1&beta;1&alpha; selection<br  /><div class="outline-text-5" id="text-orgheadline217">
<p>
Define 1&beta;1&alpha; events topology
</p>

<ul class="org-ul">
<li><p>
generic cuts :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e1a::has_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Check availabity of PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"1e1a::has_particles"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select reconstructed particle for 1e1a topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_particles : <span class="org-variable-name">boolean</span> = true

[<span class="org-variable-name">name</span>=<span class="org-string">"1e1a::has_pattern_id"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Ensure pattern id presence for 1e1a topology"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this cut instance</span>
mode.has_pattern_id : <span class="org-variable-name">boolean</span> = true
</pre>
</div></li>

<li><p>
select 1 electron, 1 alpha delayed event topology :
</p>
<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e1a::topology_pattern"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::cut::topology_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Select 1 electron/1 alpha topology events"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"error"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for pattern id label</span>
mode.pattern_id : <span class="org-variable-name">boolean</span> = true

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Label of the topology pattern id</span>
pattern_id.label : <span class="org-variable-name">string</span> = <span class="org-string">"1e1a"</span>
</pre>
</div></li>
</ul>

<table id="orgtable25" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="void">
<caption class="t-above"><span class="table-number">Table 25:</span> <b>Definition of 1&beta;1&alpha; channel.</b></caption>

<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">1e1a::has_particle_track_data</td>
</tr>

<tr>
<td class="org-left">1e1a::has_particles</td>
</tr>

<tr>
<td class="org-left">1e1a::has_pattern_id</td>
</tr>

<tr>
<td class="org-left">1e1a::topology_pattern</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-shell">[<span class="org-variable-name">name</span>=<span class="org-string">"1e1a::channel_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Cut description</span>
cut.description : <span class="org-variable-name">string</span> = <span class="org-string">"Multi-and cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = @variant(core:logging_priority|<span class="org-string">"warning"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[4] = <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1a::has_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1a::has_particles"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1a::has_pattern_id"</span> <span class="org-sh-escaped-newline">\</span>
<span class="org-string">"1e1a::topology_pattern"</span>
</pre>
</div>
</div></li></ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline220" class="outline-2">
<h2 id="orgheadline220"><span class="section-number-2">5</span> Running SN@ilWare processing chain</h2>
<div class="outline-text-2" id="text-5">
<p>
Since this configuration will run through the executable <code>bxdpp_processing</code> from
Bayeux library and not through <code>flsimulate+flreconstruct</code> binaries from Falaise
library, we should take care of loading the proper libraries. This is
automatically done with the <a href="#orgheadline13">2.3</a> code where library paths to be used by
this setup are explicitely set.
</p>

<p>
Running processing pipeline is done by the <code>bxdpp_processing</code> program provided
by <code>dpp</code> library. Its call is pretty simple and only implies to have a module
manager file. Nevertheless, since we do not rely to Falaise <i>i.e.</i> we do not use
<code>flsimulate+flreconstruct</code> we must set different resource paths (geometry,
materials). This is not user-friendly at all but this is the only way so far.
</p>

<p>
For example, if you only want to do simulation, you can run the following
command
</p>

<div class="org-src-container">

<pre class="src src-shell">bxdpp_processing                                                                             <span class="org-sh-escaped-newline">\</span>
    --module-manager-config ./current/module_manager.conf                                    <span class="org-sh-escaped-newline">\</span>
    --module simulation                                                                      <span class="org-sh-escaped-newline">\</span>
    --dlls-config ./current/dlls.conf                                                        <span class="org-sh-escaped-newline">\</span>
    --datatools::<span class="org-variable-name">resource_path</span>=<span class="org-string">"falaise@&lt;falaise install dir&gt;/share/Falaise-1.0.0/resources"</span> <span class="org-sh-escaped-newline">\</span>
    --max-records 100
</pre>
</div>

<p>
An other way to run the previous command without loading the <code>dlls.conf</code> file
will be to temporarly set the <code>LD_LIBRARY_PATH</code> variable and to point it to the
<code>Falaise</code> and <code>Bayeux</code> libraries path namely
</p>
<div class="org-src-container">

<pre class="src src-shell"><span class="org-variable-name">LD_LIBRARY_PATH</span>=<span class="org-string">"&lt;bayeux install dir&gt;/bayeux/install/lib64:&lt;falaise install dir&gt;/falaise/install/lib64"</span> <span class="org-sh-escaped-newline">\</span>
bxdpp_processing                                                                                        <span class="org-sh-escaped-newline">\</span>
    --module-manager-config ./current/module_manager.conf                                               <span class="org-sh-escaped-newline">\</span>
    --module simulation                                                                                 <span class="org-sh-escaped-newline">\</span>
    --load-dll Bayeux_mctools_geant4 --load-dll Falaise                                                 <span class="org-sh-escaped-newline">\</span>
    --datatools::<span class="org-variable-name">resource_path</span>=<span class="org-string">"falaise@&lt;falaise install dir&gt;/share/Falaise-1.0.0/resources"</span>            <span class="org-sh-escaped-newline">\</span>
    --max-records 100
</pre>
</div>

<p>
It will launch 100 simulated events using the <code>simulation_chain</code> module as
setup <a href="#orgheadline40">in this section</a>.
</p>

<p>
In the same way you can run the calibration chain by doing
</p>

<div class="org-src-container">

<pre class="src src-shell">bxdpp_processing                                                                             <span class="org-sh-escaped-newline">\</span>
    --module-manager-config ./current/module_manager.conf                                    <span class="org-sh-escaped-newline">\</span>
    --module calibration                                                                     <span class="org-sh-escaped-newline">\</span>
    --dlls-config ./current/dlls.conf                                                        <span class="org-sh-escaped-newline">\</span>
    --datatools::<span class="org-variable-name">resource_path</span>=<span class="org-string">"falaise@&lt;falaise install dir&gt;/share/Falaise-1.0.0/resources"</span> <span class="org-sh-escaped-newline">\</span>
    --input-file /tmp/$<span class="org-variable-name">USER</span>/io_output_simulated.brio
</pre>
</div>
<p>
where file <code>/tmp/$USER/io_output_simulated.brio</code> is the one produced by the
<code>simulation_chain</code> module as defined and setup <a href="#orgheadline16">in this section</a>.
</p>

<p>
All the different process steps can then be run using the dedicated module such
as <a href="#orgheadline79">clustering</a> or <a href="#orgheadline94">fitting</a> Geiger cells. The most complete mode is the
<code>full_chain</code> module where all process are done from simulation &rarr; calibration &rarr;
track reconstruction<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>.
 <div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara"> For such processing you will need additional libraries see <a href="#orgheadline13">2.3</a>. </p><br/></div>
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes"> </h2>
<div id="text-footnotes">





</div>
</div></div>
<div id="postamble" class="status">
File under <i class="fa fa-github-alt"></i> version control - commit <a href="https://github.com/xgarrido/snemo_simulation_configuration/commit/a31847f17af5483c3e262731b882fb28f4a8eb91">a31847f</a> - 2015-09-22
</div>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>SN@ilWare Simulation Configuration</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Xavier Garrido" />
<link rel="stylesheet" href="css/styles.css">
               <link rel="stylesheet" href="css/org-pygments.css">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a href="simulation_config.html">main</a>
                   <a href="sngeometry_manager.html">geometry manager</a>
                   <a href="sng4_manager.html">G4 manager</a>
                   <a href="sngenbb_manager.html">genbb manager</a>
                   <a href="sngenvertex_manager.html">vertex manager</a>
                   <a href="step_hit_processor_factory.html">step hit processors</a>
                   <a href="snanalysis_manager.html">analysis</a>
</div>
<div id="content">
<h1 class="title">SN@ilWare Simulation Configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Introduction</a></li>
<li><a href="#sec-2">2. Pipeline general configuration</a>
<ul>
<li><a href="#sec-2-1">2.1. Module manager</a></li>
<li><a href="#sec-2-2">2.2. Service manager</a></li>
<li><a href="#sec-2-3">2.3. DLL loader</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Modules</a>
<ul>
<li><a href="#sec-3-1">3.1. I/O modules</a></li>
<li><a href="#sec-3-2">3.2. Utility modules</a></li>
<li><a href="#sec-3-3">3.3. Simulation to calibration modules</a></li>
<li><a href="#sec-3-4">3.4. Tracker clustering, tracker fitting &amp; particle tracking modules</a></li>
<li><a href="#sec-3-5">3.5. Analysis chain modules</a></li>
<li><a href="#sec-3-6">3.6. Plot modules</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Services</a>
<ul>
<li><a href="#sec-4-1">4.1. Context service</a></li>
<li><a href="#sec-4-2">4.2. Geometry service</a></li>
<li><a href="#sec-4-3">4.3. Cuts service</a></li>
<li><a href="#sec-4-4">4.4. Histogram service</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Running SN@ilWare processing chain</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This file contains a SN@ilWare configuration to run SuperNEMO simulations. The
current version is hosted at
<a href="https://github.com/xgarrido/snemo_simulation_configuration">https://github.com/xgarrido/snemo_simulation_configuration</a> under <code>git</code> version
control. You can clone this repository by doing
</p>

<div class="org-src-container">

<pre class="src src-sh">git clone https://github.com/xgarrido/snemo_simulation_configuration snemo_configuration
</pre>
</div>

<p>
This will create a directory <code>snemo_configuration</code> in the working directory
containing all the source files needed to configure and to setup SN@ilWare
programs.
</p>

<p>
The configuration files are organised using <a href="http://orgmode.org/worg/org-contrib/babel/index.html">org-babel</a> and its ability to execute
source code. It requires then a recent installation of emacs<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup> which bundles
<code>org</code>. Without entering into too much details regarding <code>org-babel</code> abilities,
the basic idea is to give a &ldquo;literate&rdquo; way to navigate through the different
sections, each of them representing a configuration file. Moreover, using <code>org</code>
folding/unfolding capability, item can be hide and the user can focus on
relevant parts.
</p>

<p>
To export the different configuration files, you can run <code>org-babel-tangle</code>
which will tangle each code block into the given file<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup> or use the associated
Makefile. The author recommends to use the Makefile since the tangling process
is asynchronous and thus, does not freeze your emacs (<code>org-babel-tangle</code>
&ldquo;occupies&rdquo; emacs during its execution).
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Pipeline general configuration</h2>
<div class="outline-text-2" id="text-2">
<p>
SN@ilWare implements the concept of data processing pipeline. An event record
object is passed through a chain of data processing modules, each of them being
responsible for a given task. Modules and services are declared in Section
<a href="#sec-3">3</a> and Section <a href="#sec-4">4</a>. For more details on running SuperNEMO simulations
and the concept behind modules/services see <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=1889">these mandatory presentations</a> given
by F. Mauger.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Module manager</h3>
<div class="outline-text-3" id="text-2-1">
<p>
This file is the main and central piece of code for loading all modules/services
needed by <code>dpp_processing</code> binary. It provides links to module files and
service files.
</p>
</div>
<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1">Logging priority</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Module manager logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded module factory debug flag</span>
factory.debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded module factory 'no preload' flag</span>
factory.no_preload : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2">Service manager configuration</h4>
<div class="outline-text-4" id="text-2-1-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The configuration file of the embedded service manager</span>
service_manager.configuration : string[1] as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/service_manager.conf"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3">Configuration files for modules</h4>
<div class="outline-text-4" id="text-2-1-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The configuration files for modules</span>
modules.configuration_files : string[6] as <span class="org-variable-name">path</span> =                                   <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/io_modules.conf"</span>       <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/utl_modules.conf"</span>      <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/s2c_modules.conf"</span>      <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/tracker_modules.conf"</span>  <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/analysis_modules.conf"</span> <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/plot_modules.conf"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Service manager</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1">Logging priority</h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Service manager logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2">Name &amp; description</h4>
<div class="outline-text-4" id="text-2-2-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the service manager</span>
name : <span class="org-variable-name">string</span> = <span class="org-string">"sn_service_manager"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The description of the service manager</span>
description : <span class="org-variable-name">string</span> = <span class="org-string">"A SuperNEMO service manager"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3">List of service files</h4>
<div class="outline-text-4" id="text-2-2-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of files that describe services</span>
services.configuration_files : string[1] as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/services.conf"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> DLL loader</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1">Libraries</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
This part set the different libraries to be loaded at runtime. This is needed
since event data models or algorithms may be defined in other libraries than the
<code>dpp</code> and inherited libraries. The following table sets a full (and exhaustive)
list of needed libraries
</p>

<table id="dll_libraries" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 1:</span> Libraries to be used by modules</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">mctools_g4</td>
</tr>

<tr>
<td class="left">mctools_bio</td>
</tr>

<tr>
<td class="left">sncore</td>
</tr>

<tr>
<td class="left">sncore_bio</td>
</tr>

<tr>
<td class="left">snreconstruction</td>
</tr>

<tr>
<td class="left">snanalysis</td>
</tr>

<tr>
<td class="left">snanalysis_bio</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "filename"</span>
[<span class="org-variable-name">name</span>=<span class="org-string">"mctools_g4"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The mctools_g4 library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1

[<span class="org-variable-name">name</span>=<span class="org-string">"mctools_bio"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The mctools_bio library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1

[<span class="org-variable-name">name</span>=<span class="org-string">"sncore"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The sncore library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1

[<span class="org-variable-name">name</span>=<span class="org-string">"sncore_bio"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The sncore_bio library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1

[<span class="org-variable-name">name</span>=<span class="org-string">"snreconstruction"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The snreconstruction library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1

[<span class="org-variable-name">name</span>=<span class="org-string">"snanalysis"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The snanalysis library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1

[<span class="org-variable-name">name</span>=<span class="org-string">"snanalysis_bio"</span> <span class="org-variable-name">filename</span>=<span class="org-string">""</span>]
<span class="org-comment-delimiter">#</span><span class="org-comment">config The snanalysis_bio library</span>
<span class="org-builtin">autoload</span> : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Modules</h2>
<div class="outline-text-2" id="text-3">
<p>
A data processing module is an object that performs some specific action (apply
an algorithm) on event records (see <a href="https://nemo.lpc-caen.in2p3.fr/wiki/SNSW_SNailWare_FAQ#Dataprocessingmodules">SN@ilWare FAQ</a> for more details). It inherits
the <code>dpp::base_module</code> mother/interface class. A module class implements a few
mandatory methods :
</p>

<ul class="org-ul">
<li>constructor
</li>
<li>destructor
</li>
<li><code>initialize</code>
</li>
<li><code>reset</code>
</li>
<li><code>process</code>
</li>
</ul>

<p>
The next items hold the configuration for several modules used in SN@ilWare
pipeline processing.
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> I/O modules</h3>
<div class="outline-text-3" id="text-3-1">
<p>
This section defines some I/O output modules to store data record. By default,
all I/O files are saved in <code>/tmp/${USER}/snemo.d</code> directory.
</p>
</div>

<div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1">Insert preamble</h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2">Simulation output</h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_simulated"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_simulated.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-3" class="outline-4">
<h4 id="sec-3-1-3">Calibration output</h4>
<div class="outline-text-4" id="text-3-1-3">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_calibrated"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_calibrated.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-4" class="outline-4">
<h4 id="sec-3-1-4">Tracker clustering output</h4>
<div class="outline-text-4" id="text-3-1-4">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_tracker_clustering.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-5" class="outline-4">
<h4 id="sec-3-1-5">Tracker trajectory output</h4>
<div class="outline-text-4" id="text-3-1-5">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_trajectory"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_tracker_trajectory.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-6" class="outline-4">
<h4 id="sec-3-1-6">Particle track output</h4>
<div class="outline-text-4" id="text-3-1-6">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_particle_track"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_particle_track.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-7" class="outline-4">
<h4 id="sec-3-1-7">Analysis output</h4>
<div class="outline-text-4" id="text-3-1-7">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_analysed"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_analysed.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-8" class="outline-4">
<h4 id="sec-3-1-8">Selection output</h4>
<div class="outline-text-4" id="text-3-1-8">
<ul class="org-ul">
<li>Calibration cuts
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_calibrated_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_calibrated_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_calibrated_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_calibrated_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</li>

<li>Tracking cuts
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_clustering_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_tracker_clustering_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_clustering_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_tracker_clustering_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</li>

<li>Fitting cuts
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_trajectory_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_tracker_trajectory_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_tracker_trajectory_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_tracker_trajectory_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</li>

<li>Particle track cuts
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_particle_track_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_particle_track_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"io_output_particle_track_non_selected"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::output_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Output file mode</span>
files.mode : <span class="org-variable-name">string</span> = <span class="org-string">"single"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Path to output data file</span>
files.single.filename : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/io_output_particle_track_non_selected.brio"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Context service</span>
Ctx_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Ctx"</span>
</pre>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Utility modules</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Here we define some common and useful tasks such as removing data/MC hits.
</p>
</div>

<div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1">Insert preamble</h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-2-2" class="outline-4">
<h4 id="sec-3-2-2">Remove event header</h4>
<div class="outline-text-4" id="text-3-2-2">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_header"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"EH"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-2-3" class="outline-4">
<h4 id="sec-3-2-3">Remove simulated data bank</h4>
<div class="outline-text-4" id="text-3-2-3">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_simulated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"SD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-2-4" class="outline-4">
<h4 id="sec-3-2-4">Remove calibrated data bank</h4>
<div class="outline-text-4" id="text-3-2-4">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_calibrated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"CD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-2-5" class="outline-4">
<h4 id="sec-3-2-5">Remove tracker clustering data bank</h4>
<div class="outline-text-4" id="text-3-2-5">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"TCD"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2-6" class="outline-4">
<h4 id="sec-3-2-6">Remove tracker trajectory data bank</h4>
<div class="outline-text-4" id="text-3-2-6">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_tracker_trajectory_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"TTD"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2-7" class="outline-4">
<h4 id="sec-3-2-7">Remove particle track data bank</h4>
<div class="outline-text-4" id="text-3-2-7">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"remove_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"remove_banks"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label to be removed</span>
mode.remove_banks.labels : <span class="org-variable-name">string</span>[1] = <span class="org-string">"PTD"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Simulation to calibration modules</h3>
<div class="outline-text-3" id="text-3-3">
</div>
<div id="outline-container-sec-3-3-1" class="outline-4">
<h4 id="sec-3-3-1">Insert preamble</h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-3-2" class="outline-4">
<h4 id="sec-3-3-2">G4 simulation</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
A processor that populate the event record <code>simulated data</code> bank with Geant4
output (see <a href="https://nemo.lpc-caen.in2p3.fr/wiki/SNSW_SNailWare_FAQ#Monte-Carloproduction">SN@ilWare FAQ</a>).
</p>
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"simulation"</span> <span class="org-variable-name">type</span>=<span class="org-string">"mctools::g4::simulation_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li>Logging flag<br  /><div class="outline-text-5" id="text-3-3-2-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The simulation manager logging priority</span>
manager.logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>
</pre>
</div>
</div>
</li>

<li>Bank &amp; service labels<br  /><div class="outline-text-5" id="text-3-3-2-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The Geometry Service label</span>
Geo_label : <span class="org-variable-name">string</span> = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The 'Simulated data' bank label in the event record</span>
SD_label  : <span class="org-variable-name">string</span> = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Flag to allow cleaning of some former simulated data bank if any (default: 0)</span>
erase_former_SD_bank : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</li>

<li>Seed values<br  /><div class="outline-text-5" id="text-3-3-2-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The simulation manager PRNG seed</span>
manager.seed                  : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The vertex generator PRNG seed</span>
manager.vertex_generator_seed : <span class="org-variable-name">integer</span> = 4

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The event generator PRNG seed</span>
manager.event_generator_seed  : <span class="org-variable-name">integer</span> = 5

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The SHPF PRNG seed</span>
manager.shpf_seed             : <span class="org-variable-name">integer</span> = 6

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The saving of PRNG seeds</span>
manager.output_prng_seeds_file  : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/prng_seeds.save"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The saving of PRNG states</span>
manager.output_prng_states_file : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/prng_states.save"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The modulo for PRNG states backup</span>
manager.prng_states_save_modulo : <span class="org-variable-name">integer</span> = 10
</pre>
</div>
</div>
</li>

<li>Vertex generator<br  /><div class="outline-text-5" id="text-3-3-2-4">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The vertex generator PRNG label</span>
manager.vertex_generator_name : <span class="org-variable-name">string</span>  = <span class="org-string">"source_strips_bulk"</span>
</pre>
</div>
</div>
</li>

<li>Event generator<br  /><div class="outline-text-5" id="text-3-3-2-5">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The event generator PRNG label</span>
manager.event_generator_name  : <span class="org-variable-name">string</span>  = <span class="org-string">"bb0nu_Se82"</span>
</pre>
</div>
</div>
</li>

<li>G4 manager<br  /><div class="outline-text-5" id="text-3-3-2-6">
<p>
The full <code>geant4</code> configuration can be found in the <a href="./sng4_manager.html">sng4_manager</a> file.
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The simulation manager configuration file</span>
manager.configuration_filename : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/sng4_manager.conf"</span>
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-3-3-3" class="outline-4">
<h4 id="sec-3-3-3">Adding event header</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
After Geant4 simulation, no event header is added and available in the event
record. This module adds some information related either to real data (run
number) or simulated data like <code>genbb</code> weight in case the total energy of primary
particles has been restricted.
</p>
</div>

<ul class="org-ul"><li>General informations<br  /><div class="outline-text-5" id="text-3-3-3-1">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"add_header"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::processing::event_header_utils_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The processor mode</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"add_header"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
mode.add_header.bank_label : <span class="org-variable-name">string</span> = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The run number</span>
mode.add_header.run_number : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The number of the first event number to be set</span>
mode.add_header.event_number : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The event weight given by GENBB and used for 'energy_range' mode</span>
mode.add_header.use_genbb_weight : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>

<p>
Among the options offered by <code>event_header_utils_module</code>, there is a possibility
to give an external file (following <code>datatools::properties</code> writing conventions)
where additionnal informations can be added. Typical use case is the definition
of some properties/descriptions of simulation runs (see below).
</p>

<p>
The <code>external_properties_prefix</code> allows to filter which properties should be
stored. If no <code>external_properties_prefix</code> field is defined then all the
properties are used and serialized.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The external properties files to be exported in event_header properties</span>
mode.add_header.external_properties_path : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/snsimulation_header.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The external properties prefix to export only properties starting with this prefix</span>
mode.add_header.external_properties_prefix : <span class="org-variable-name">string</span> = <span class="org-string">"analysis"</span>
</pre>
</div>
</div>
</li>
<li>Analysis informations<br  /><div class="outline-text-5" id="text-3-3-3-2">
</div>
<ul class="org-ul"><li>Properties store<br  /><div class="outline-text-6" id="text-3-3-3-2-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The analysis description</span>
analysis.description : <span class="org-variable-name">string</span> = <span class="org-string">"Sensitivity studies for SuperNEMO demonstrator"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The version control status</span>
analysis.vc_status : <span class="org-variable-name">string</span> = <span class="org-string">"git master branch - commit eb74fff - 2013-12-25"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The total number of event simulated</span>
analysis.total_number_of_event : <span class="org-variable-name">integer</span> = 100000

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The double beta decay process</span>
analysis.decay_process : <span class="org-variable-name">string</span> = <span class="org-string">"bb2nu"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The source isotope</span>
analysis.source_isotope : <span class="org-variable-name">string</span> = <span class="org-string">"Se82"</span>
</pre>
</div>
</div>
</li></ul>
</li></ul>
</div>

<div id="outline-container-sec-3-3-4" class="outline-4">
<h4 id="sec-3-3-4">Tracker simulation to calibration data</h4>
<div class="outline-text-4" id="text-3-3-4">
<p>
This module converts simulated data into calibrated data for SuperNEMO
tracker. It is a mock digitization/calibration data module of Monte-Carlo
hits. It applies some anode/cathode efficiencies as well as calibration and
smearing curves to translate times into longitudinal and transerve
positions. Main references document for this module can be find in DocDb <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=786">#786</a>
and <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=843">#843</a>.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"tracker_s2c"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::core::processing::basic_tracker_s2c_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li>Logging priority<br  /><div class="outline-text-5" id="text-3-3-4-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>
</pre>
</div>
</div>
</li>
<li>Data bank labels and hit category<br  /><div class="outline-text-5" id="text-3-3-4-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
EH_label : <span class="org-variable-name">string</span>  = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Simulated Data' bank</span>
SD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The category of hits to be processed as Geiger hits</span>
hit_category  : <span class="org-variable-name">string</span>  = <span class="org-string">"gg"</span>
</pre>
</div>
</div>
</li>
<li>Random generator<br  /><div class="outline-text-5" id="text-3-3-4-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Pseudo-random numbers generator setup</span>
random.id   : <span class="org-variable-name">string</span>  = <span class="org-string">"mt19937"</span>
random.seed : <span class="org-variable-name">integer</span> = 12345
</pre>
</div>
</div>
</li>
<li>Geiger cells dimensions<br  /><div class="outline-text-5" id="text-3-3-4-4">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Drift cell effective/active diameter</span>
cell_diameter : <span class="org-variable-name">real</span> = 44.0   <span class="org-comment-delimiter"># </span><span class="org-comment">mm</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Drift cell effective/active length</span>
cell_length   : <span class="org-variable-name">real</span> = 2900.0 <span class="org-comment-delimiter"># </span><span class="org-comment">mm</span>
</pre>
</div>
</div>
</li>
<li>Anode/cathode efficiencies<br  /><div class="outline-text-5" id="text-3-3-4-5">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description anode efficiency</span>
base_anode_efficiency   : <span class="org-variable-name">real</span> = 1.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description cathode efficiency</span>
base_cathode_efficiency : <span class="org-variable-name">real</span> = 1.0
</pre>
</div>
</div>
</li>

<li>Plasma longitudinal speed<br  /><div class="outline-text-5" id="text-3-3-4-6">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description plasma longitudinal speed</span>
plasma_longitudinal_speed : <span class="org-variable-name">real</span> = 5.0 <span class="org-comment-delimiter"># </span><span class="org-comment">cm/us</span>
</pre>
</div>
</div>
</li>

<li>Longitudinal &amp; transerve reconstruction parameters<br  /><div class="outline-text-5" id="text-3-3-4-7">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Error on reconstructed longitudinal position (from a plot by Irina)</span>
sigma_z                  : <span class="org-variable-name">real</span> = 1.0     <span class="org-comment-delimiter"># </span><span class="org-comment">cm (to be confirmed)</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Error on reconstructed longitudinal position when one cathode signal is missing</span>
sigma_z_missing_cathode  : <span class="org-variable-name">real</span> = 5.0     <span class="org-comment-delimiter"># </span><span class="org-comment">cm (to be confirmed)</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Error on reconstructed horizontal position (parameters of a fit of data by Irina)</span>
sigma_r_a  : <span class="org-variable-name">real</span> = 0.425   <span class="org-comment-delimiter"># </span><span class="org-comment">mm</span>
sigma_r_b  : <span class="org-variable-name">real</span> = 0.0083  <span class="org-comment-delimiter"># </span><span class="org-comment">dimensionless</span>
sigma_r_r0 : <span class="org-variable-name">real</span> = 12.25   <span class="org-comment-delimiter"># </span><span class="org-comment">mm</span>
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-3-3-5" class="outline-4">
<h4 id="sec-3-3-5">Calorimeter simulation to calibration data</h4>
<div class="outline-text-4" id="text-3-3-5">
<p>
This module converts Monte-Carlo hits into calorimeter hits. Like the previous
<i>section</i>, it is a mock digitization/calibration of simulation hits. It basicaly
aggregates several energy deposits, calculates the total energy deposited and
the time of the first energy deposit and finally, it smears the energy and time
by some experimental energy/time resolution. There is also a special treatments
for the quenching of alpha particles.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"calorimeter_s2c"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::core::processing::basic_calorimeter_s2c_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li>Logging priority<br  /><div class="outline-text-5" id="text-3-3-5-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>
</pre>
</div>
</div>
</li>
<li>Data bank labels and hit category<br  /><div class="outline-text-5" id="text-3-3-5-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
EH_label : <span class="org-variable-name">string</span>  = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Simulated Data' bank</span>
SD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The categories of hits to be processed as calorimeter hits</span>
hit_categories  : <span class="org-variable-name">string</span>[3]  = <span class="org-string">"calo"</span> <span class="org-string">"xcalo"</span> <span class="org-string">"gveto"</span>
</pre>
</div>
</div>
</li>

<li>Random generator<br  /><div class="outline-text-5" id="text-3-3-5-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Pseudo-random numbers generator setup</span>
random.id   : <span class="org-variable-name">string</span>  = <span class="org-string">"mt19937"</span>
random.seed : <span class="org-variable-name">integer</span> = 12345
</pre>
</div>
</div>
</li>
<li>Alpha quenching parameters<br  /><div class="outline-text-5" id="text-3-3-5-4">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Alpha quenching boolean</span>
alpha_quenching : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Alpha quenching parameters</span>
alpha_quenching_parameters : <span class="org-variable-name">real</span>[3] = 77.4 0.639 2.34
</pre>
</div>
</div>
</li>
<li>Scintillator relaxation time for time resolution<br  /><div class="outline-text-5" id="text-3-3-5-5">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Time resolution parameters</span>
scintillator_relaxation_time : <span class="org-variable-name">real</span> = 6.0 <span class="org-comment-delimiter"># </span><span class="org-comment">ns</span>
</pre>
</div>
</div>
</li>
<li>Energy resolutions<br  /><div class="outline-text-5" id="text-3-3-5-6">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Optical lines resolutions (FWHM @ 1 MeV)</span>
calo.resolution  : <span class="org-variable-name">real</span> = 0.08
xcalo.resolution : <span class="org-variable-name">real</span> = 0.12
gveto.resolution : <span class="org-variable-name">real</span> = 0.15
</pre>
</div>
</div>
</li>
<li>Energy thresholds<br  /><div class="outline-text-5" id="text-3-3-5-7">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Optical lines trigger thresholds</span>
calo.high_threshold  : <span class="org-variable-name">real</span> = 150 <span class="org-comment-delimiter"># </span><span class="org-comment">keV</span>
xcalo.high_threshold : <span class="org-variable-name">real</span> = 150 <span class="org-comment-delimiter"># </span><span class="org-comment">keV</span>
gveto.high_threshold : <span class="org-variable-name">real</span> = 150 <span class="org-comment-delimiter"># </span><span class="org-comment">keV</span>

calo.low_threshold   : <span class="org-variable-name">real</span> = 50  <span class="org-comment-delimiter"># </span><span class="org-comment">keV</span>
xcalo.low_threshold  : <span class="org-variable-name">real</span> = 50  <span class="org-comment-delimiter"># </span><span class="org-comment">keV</span>
gveto.low_threshold  : <span class="org-variable-name">real</span> = 50  <span class="org-comment-delimiter"># </span><span class="org-comment">keV</span>
</pre>
</div>
</div>
</li></ul>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Tracker clustering, tracker fitting &amp; particle tracking modules</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-sec-3-4-1" class="outline-4">
<h4 id="sec-3-4-1">Insert preamble</h4>
<div class="outline-text-4" id="text-3-4-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-4-2" class="outline-4">
<h4 id="sec-3-4-2">Clustering algorithms</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
This section holds different modules all related to tracker clustering.
</p>
</div>

<ul class="org-ul"><li>Basic tracker clustering<br  /><div class="outline-text-5" id="text-3-4-2-1">
<p>
This algorithm is too much simple but it can serve as a comparison point with
respect to more elaborated algorithms in terms of time processing. It basically
associates geiger cells but considering succesive neighbors. It does not use the
longitudinal information and then can aggregates track belonging to two
different particles. Due to over-simplicty, it does not need any parameters !
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"btc_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::processing::basic_tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker hits clustering algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"BTC"</span>
</pre>
</div>
</div>
</li>
<li>Cellular Automaton Tracker<br  /><div class="outline-text-5" id="text-3-4-2-2">
<p>
This algorithm provides tons of parameters and is based in F. Nova work. A
somewhat complete overview of CAT main features can be seen in DocDb <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=2120">#2120</a>.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"cat_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::processing::tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging support</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker hits clustering algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"CAT"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of prompt hits</span>
TPC.processing_prompt_hits : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.processing_delayed_hits : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The time width of the window for collecting candidate clusters of delayed hits (in microsecond)</span>
TPC.delayed_hit_cluster_time : <span class="org-variable-name">real</span> = 10.0 <span class="org-comment-delimiter"># </span><span class="org-comment">microsec</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.split_chamber : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description CAT verbosity level</span>
CAT.level : <span class="org-variable-name">string</span> = <span class="org-string">"NORMAL"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description CAT param</span>
CAT.ratio : <span class="org-variable-name">real</span> = 10.

<span class="org-comment-delimiter">#</span><span class="org-comment">@description CAT number of layers to skip</span>
CAT.nofflayers : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description CAT param</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">CAT.max_time : real = 5000</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description CAT driver param</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">CAT.driver.sigma_z_factor : real = 1.</span>
</pre>
</div>
</div>
</li>
<li>SULTAN tracker<br  /><div class="outline-text-5" id="text-3-4-2-3">
<p>
Federico Nova recently implements a new way to cluster Geiger cells by
translating their intrinsic parameters namely cell position, drift radius and
azimuthal position in Legendre phase space. The idea was originally suggested by
Yorck Ramachers (see <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=2556">DocDB 2256</a>) and Federico added the ability to fit helix
(see <a href="http://nile.hep.utexas.edu/cgi-bin/DocDB/ut-nemo/private/ShowDocument?docid=2977">DocDB 2977</a> as well as the <a href="http://www.sciencedirect.com/science/article/pii/S0168900208005780">original paper</a>).
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"sultan_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::processing::tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging support</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"trace"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker hits clustering algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"SULTAN"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description SULTAN verbosity level</span>
SULTAN.level : <span class="org-variable-name">string</span> = <span class="org-string">"VVERBOSE"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description SULTAN number of layers to skip</span>
SULTAN.nofflayers : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description SULTAN param</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">SULTAN.max_time : real = 5000</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description SULTAN driver param</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">SULTAN.driver.sigma_z_factor : real = 1.</span>
</pre>
</div>
</div>
</li>
<li>Tracker Cluster Path<br  /><div class="outline-text-5" id="text-3-4-2-4">
<p>
This algorithm has been developped by Warwick group since June 2012 and mainly
by K. Bhardwaj.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"tcp_tracker_clustering"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::processing::tracker_clustering_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Event Header' bank</span>
EH_label : <span class="org-variable-name">string</span>  = <span class="org-string">"EH"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker hits clustering algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"TCP"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The module number</span>
module_number : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The geometry category of the Geiger drift volume</span>
gg_cell_geom_category : <span class="org-variable-name">string</span> = <span class="org-string">"drift_cell_core"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of prompt hits</span>
TPC.processing_prompt_hits : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.processing_delayed_hits : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The time width of the window for collecting candidate clusters of delayed hits (in microsecond)</span>
TPC.delayed_hit_cluster_time : <span class="org-variable-name">real</span> = 10.0 <span class="org-comment-delimiter"># </span><span class="org-comment">microsec</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activation of the clustering of delayed hits</span>
TPC.split_chamber : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.gamma : <span class="org-variable-name">integer</span> = 3

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.lambda : <span class="org-variable-name">real</span> = 0.1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.join_threshold : <span class="org-variable-name">real</span> = 0.70

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.opt_threshold : <span class="org-variable-name">real</span> = 0.00001

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.lambda_factor : <span class="org-variable-name">real</span> = 1.05

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.smooth : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.max_iterations : <span class="org-variable-name">integer</span> = 1000

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.line_search_freq : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.line_search_points : <span class="org-variable-name">integer</span> = 10

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.check_splits : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.target_cluster : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.max_number_of_clusters_allowed : <span class="org-variable-name">integer</span> = 3

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.verbose : <span class="org-variable-name">integer</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.refinement_no : <span class="org-variable-name">integer</span> = 5

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.line_tolerance : <span class="org-variable-name">real</span> = 0.39

<span class="org-comment-delimiter">#</span><span class="org-comment">@description TCP param</span>
TCP.point_tolerance : <span class="org-variable-name">real</span> = 100
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-3-4-3" class="outline-4">
<h4 id="sec-3-4-3">Fitting algorithm</h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
As the time of writing this document, there is only one algorithm well
integrated into SN@ilWare pipeline. It is based on <a href="https://nemo.lpc-caen.in2p3.fr/wiki/trackfit">trackfit</a> originally
developped and tested on NEMO3 data. It is quite an agnostic algorithm in the
sense that it only asked for cells position and drift radius. Fitting process is
done by GSL minimizer to find the global solution given the model: either helix
or line models.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"trackfit_tracker_fitting"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::reconstruction::processing::tracker_fitting_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li>General logging<br  /><div class="outline-text-5" id="text-3-4-3-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>
</pre>
</div>
</div>
</li>
<li>Data bank &amp; services labels<br  /><div class="outline-text-5" id="text-3-4-3-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Clustering Data' bank</span>
TCD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Trajectory Data' bank</span>
TTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TTD"</span>
</pre>
</div>
</div>
</li>
<li>General options<br  /><div class="outline-text-5" id="text-3-4-3-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The maximum number of fits to be saved (0 means all will be kept)</span>
maximum_number_of_fits : <span class="org-variable-name">integer</span> = 0
</pre>
</div>
</div>
</li>
<li>Trackfit algorithm<br  /><div class="outline-text-5" id="text-3-4-3-4">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The ID of the tracker fitting algorithm</span>
algorithm : <span class="org-variable-name">string</span>  = <span class="org-string">"trackfit"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li>Logging priority<br  /><div class="outline-text-6" id="text-3-4-3-4-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
trackfit.logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"error"</span>
</pre>
</div>
</div>
</li>
<li>Drift time calibration<br  /><div class="outline-text-6" id="text-3-4-3-4-2">
<p>
For time delayed cluster like alpha particle track, a <i>a posteriori</i> drift time
calibration has to be done to shift the time origin and then calculates the new
cell radius. The <code>drift_time_calibration</code> can be anything if it respects some
object interface rules defines in <code>trackfit::i_drift_time_calibration</code>
class. Here we use the same model as in Section <a href="#sec-3-3-4">Tracker simulation to calibration data</a>.
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Use drift time (re)calibration</span>
trackfit.drift_time_calibration_label : <span class="org-variable-name">string</span> = <span class="org-string">"snemo"</span>
</pre>
</div>
</div>
</li>
<li>Fit models<br  /><div class="outline-text-6" id="text-3-4-3-4-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Fit models</span>
trackfit.models : <span class="org-variable-name">string</span>[2] = <span class="org-string">"helix"</span> <span class="org-string">"line"</span>
</pre>
</div>
</div>
</li>

<li>Line fit parameters<br  /><ul class="org-ul"><li>Guess parameters<br  /><div class="outline-text-7" id="text-3-4-3-4-4-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate logging messages for line guess driver</span>
trackfit.line.guess.logging.priority  : <span class="org-variable-name">string</span> = <span class="org-string">"error"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use max radius (cell size) to construct initial guess point (1) or use the effective drift Geiger distance of the hit (0)</span>
trackfit.line.guess.use_max_radius    : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Apply a factor (&gt;0) to the max radius (devel mode)</span>
trackfit.line.guess.max_radius_factor : <span class="org-variable-name">real</span> = 1.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use guess trust (1) or keep all of the guess fits (0) and select later</span>
trackfit.line.guess.use_guess_trust   : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Mode for trusting a fit guess ("counter", "barycenter")</span>
trackfit.line.guess.guess_trust_mode  : <span class="org-variable-name">string</span> = <span class="org-string">"counter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Fit the delayed geiger cluster</span>
trackfit.line.guess.fit_delay_cluster : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</li>
<li>Fit parameters<br  /><div class="outline-text-7" id="text-3-4-3-4-4-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description 'Line' fit only guess ("BB", "BT", "TB", "TT")</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">trackfit.line.only_guess : string[1] = "TT"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Store only the N solutions with best line fit</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">trackfit.line.store_number_of_solutions : integer = 2</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Print the status of the fit stepper at each step (devel only)</span>
trackfit.line.fit.step_print_status : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Plot the 2D view of the fitted data at each step (devel only)</span>
trackfit.line.fit.step_draw         : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Track fit adds start time as an additionnal parameter to the fit (needs a calibration driver)</span>
trackfit.line.fit.fit_start_time    : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Track fit recomputes the drift distance from drift time (needs a calibration driver)</span>
trackfit.line.fit.using_drift_time  : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to begin not tangential to the first hit</span>
trackfit.line.fit.using_first       : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to end not tangential to the last hit</span>
trackfit.line.fit.using_last        : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</li></ul>
</li>

<li>Helix fit parameters<br  /><ul class="org-ul"><li>Guess parameters<br  /><div class="outline-text-7" id="text-3-4-3-4-5-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate logging messages for helix guess driver</span>
trackfit.helix.guess.logging.priority  : <span class="org-variable-name">string</span> = <span class="org-string">"error"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use max radius (cell size) to construct initial guess point (1) or use the effective drift Geiger distance of the hit (0)</span>
trackfit.helix.guess.use_max_radius    : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Apply a factor (&gt;0) to the max radius (devel mode)</span>
trackfit.helix.guess.max_radius_factor : <span class="org-variable-name">real</span> = 1.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use guess trust (1) or keep all of the guess fits (0) and select later</span>
trackfit.helix.guess.use_guess_trust   : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Mode for trusting a fit guess ("counter", "barycenter")</span>
trackfit.helix.guess.guess_trust_mode  : <span class="org-variable-name">string</span> = <span class="org-string">"counter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Fit the delayed geiger cluster (by default, false since this mode is devoted to line fit)</span>
trackfit.helix.guess.fit_delay_cluster : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</li>

<li>Fit parameters<br  /><div class="outline-text-7" id="text-3-4-3-4-5-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description 'Helix' fit only guess ("BBB", "BBT", "BTB", "BTT", "TBB", "TBT", "TTB", "TTT")</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">trackfit.helix.only_guess : string[1] = "TTT"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Store only the N solutions with best helix fit</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">trackfit.helix.store_number_of_solutions : integer = 2</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Print the status of the fit stepper at each step (devel only)</span>
trackfit.helix.fit.step_print_status : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Plot the 2D view of the fitted data at each step (devel only)</span>
trackfit.helix.fit.step_draw         : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Track fit recomputes the drift distance from drift time (needs a calibration driver)</span>
trackfit.helix.fit.using_drift_time  : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to begin not tangential to the first hit</span>
trackfit.helix.fit.using_first       : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Allow a fitted track to end not tangential to the last hit</span>
trackfit.helix.fit.using_last        : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</li></ul>
</li></ul>
</li></ul>
</div>
<div id="outline-container-sec-3-4-4" class="outline-4">
<h4 id="sec-3-4-4">Basic particle tracking</h4>
<div class="outline-text-4" id="text-3-4-4">
<p>
Given results of the two previous steps i.e. clustering and fitting, the
trajectories must be interpreted within SuperNEMO detector geometry. The
particle tracking translates trajectory into particle tracks and then determines
the track charge (assuming particle comes from the source foil), it extrapolates
track intersection with calorimeter walls and finally it associates particle
track with calorimeter blocks.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"basic_particle_tracking"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::processing::basic_particle_tracking_module"</span>]
</pre>
</div>
</div>

<ul class="org-ul"><li>Logging priority<br  /><div class="outline-text-5" id="text-3-4-4-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging flag</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>
</pre>
</div>
</div>
</li>

<li>Data banks and services labels<br  /><div class="outline-text-5" id="text-3-4-4-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the Geometry service</span>
Geo_label : <span class="org-variable-name">string</span>  = <span class="org-string">"Geo"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Calibrated Data' bank</span>
CD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Tracker Trajectory Data' bank</span>
TTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"TTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label of the 'Particle Track Data' bank</span>
PTD_label : <span class="org-variable-name">string</span>  = <span class="org-string">"PTD"</span>
</pre>
</div>
</div>
</li>

<li>Drivers<br  /><div class="outline-text-5" id="text-3-4-4-3">
<p>
The particle track reconstruction is done within several drivers, each one
having a dedicated tasks such as to compute track charge or to associate
particle track with calorimeter block. The way to perform these &ldquo;actions&rdquo; is
then decorelated with the pipeline execution. Other algorithms can be
implemented but the particle tracking module will stay unchanged.
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description List of drivers to be used (see description below)</span>
drivers : <span class="org-variable-name">string</span>[3] = <span class="org-string">"VED"</span> <span class="org-string">"CCD"</span> <span class="org-string">"CAD"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li>Vertex Extrapolation Driver<br  /><div class="outline-text-6" id="text-3-4-4-3-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Vertex Extrapolation Driver logging priority</span>
VED.logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use linear extrapolation (not implemented yet)</span>
VED.use_linear_extrapolation : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</li>
<li>Charge Computation Driver<br  /><div class="outline-text-6" id="text-3-4-4-3-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Charge Computation Driver logging priority</span>
CCD.logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Charge sign convention</span>
CCD.charge_from_source : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</li>
<li>Calorimeter Association Driver<br  /><div class="outline-text-6" id="text-3-4-4-3-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Calorimeter Association Driver logging priority</span>
CAD.logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximum matching distance for track/calo association</span>
CAD.matching_tolerance : <span class="org-variable-name">string</span> = <span class="org-string">"100 mm"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Use a simpler approach by looking for gieger cells in front of calo (not implemented yet)</span>
CAD.use_last_geiger_cell : <span class="org-variable-name">boolean</span> = 0
</pre>
</div>
</div>
</li></ul>
</li></ul>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Analysis chain modules</h3>
<div class="outline-text-3" id="text-3-5">
<p>
This section holds most of the chain module to set &ldquo;to music&rdquo; the different
modules and tasks. It also contains the different paths given the selection
requirements. One important point is that module order really matters since a
module, especially <code>chain_module</code>, needs to know the declaration of all the
modules it contains.
</p>
</div>

<div id="outline-container-sec-3-5-1" class="outline-4">
<h4 id="sec-3-5-1">Insert preamble</h4>
<div class="outline-text-4" id="text-3-5-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-2" class="outline-4">
<h4 id="sec-3-5-2">Analysis chain</h4>
<div class="outline-text-4" id="text-3-5-2">
<table id="analysis_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 2:</span> Modules used by the analysis process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">io_outputselected_track__particle</td>
</tr>

<tr>
<td class="left">remove_simulated_data</td>
</tr>

<tr>
<td class="left">remove_calibrated_data</td>
</tr>

<tr>
<td class="left">remove_trackerdata__clustering</td>
</tr>

<tr>
<td class="left">remove_trackerdata__trajectory</td>
</tr>

<tr>
<td class="left">io_output_analysed</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"analysis_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[6] =   <span class="org-string">"io_output_particle_track_selected"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_simulated_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_calibrated_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_tracker_trajectory_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"io_output_analysed"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-3" class="outline-4">
<h4 id="sec-3-5-3">Process after selecting particle track</h4>
<div class="outline-text-4" id="text-3-5-3">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_particle_track_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"particle_track_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"analysis_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_particle_track_non_selected"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-4" class="outline-4">
<h4 id="sec-3-5-4">Particle tracking chain</h4>
<div class="outline-text-4" id="text-3-5-4">
<table id="particle_tracking_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 3:</span> Modules used by the particle tracking process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">remove_particledata__track</td>
</tr>

<tr>
<td class="left">basic_particle_tracking</td>
</tr>

<tr>
<td class="left">io_outputtrack__particle</td>
</tr>

<tr>
<td class="left">process_withcuts_track__particle</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"particle_tracking_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[4] =   <span class="org-string">"remove_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"basic_particle_tracking"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"io_output_particle_track"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"process_with_particle_track_cuts"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-5" class="outline-4">
<h4 id="sec-3-5-5">Process after fitting selection</h4>
<div class="outline-text-4" id="text-3-5-5">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_fitting_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"basic_tracker_trajectory_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"particle_tracking_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_trajectory_non_selected"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-6" class="outline-4">
<h4 id="sec-3-5-6">Fitting chain</h4>
<div class="outline-text-4" id="text-3-5-6">
<table id="fitting_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 4:</span> Modules used by the fitting process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">remove_trackerdata__trajectory</td>
</tr>

<tr>
<td class="left">trackfit_tracker_fitting</td>
</tr>

<tr>
<td class="left">io_outputtrajectory__tracker</td>
</tr>

<tr>
<td class="left">process_withcuts__fitting</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"fitting_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[4] =   <span class="org-string">"remove_tracker_trajectory_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"trackfit_tracker_fitting"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"io_output_tracker_trajectory"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"process_with_fitting_cuts"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-7" class="outline-4">
<h4 id="sec-3-5-7">Process after clustering selection</h4>
<div class="outline-text-4" id="text-3-5-7">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_clustering_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"basic_tracker_clustering_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"fitting_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_tracker_clustering_non_selected"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-8" class="outline-4">
<h4 id="sec-3-5-8">Clustering chain</h4>
<div class="outline-text-4" id="text-3-5-8">
<table id="clustering_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 5:</span> Modules used by the clustering process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">remove_trackerdata__clustering</td>
</tr>

<tr>
<td class="left">btc_tracker_clustering</td>
</tr>

<tr>
<td class="left">io_outputclustering__tracker</td>
</tr>

<tr>
<td class="left">process_withcuts__clustering</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"clustering_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[4] =   <span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"btc_tracker_clustering"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"io_output_tracker_clustering"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"process_with_clustering_cuts"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-9" class="outline-4">
<h4 id="sec-3-5-9">Process after calibration selection</h4>
<div class="outline-text-4" id="text-3-5-9">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"process_with_calibrated_cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::if_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the cut service</span>
cut_service.label : <span class="org-variable-name">string</span> = <span class="org-string">"Cuts"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the condition cut</span>
condition_cut : <span class="org-variable-name">string</span> = <span class="org-string">"calibrated_cut"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is checked</span>
then_module : <span class="org-variable-name">string</span> = <span class="org-string">"clustering_chain"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the module to be processed when condition is NOT checked</span>
else_module : <span class="org-variable-name">string</span> = <span class="org-string">"io_output_calibrated_non_selected"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-10" class="outline-4">
<h4 id="sec-3-5-10">Calibration chain</h4>
<div class="outline-text-4" id="text-3-5-10">
<table id="calibration_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 6:</span> Modules used by the calibration process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">add_header</td>
</tr>

<tr>
<td class="left">tracker_s2c</td>
</tr>

<tr>
<td class="left">calorimeter_s2c</td>
</tr>

<tr>
<td class="left">io_output_calibrated</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"calibration_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[4] =   <span class="org-string">"add_header"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"tracker_s2c"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"calorimeter_s2c"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"io_output_calibrated"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-11" class="outline-4">
<h4 id="sec-3-5-11">Simulation chain</h4>
<div class="outline-text-4" id="text-3-5-11">
<table id="simulation_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 7:</span> Modules used by the simulation process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">simulation</td>
</tr>

<tr>
<td class="left">io_output_simulated</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"simulation_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[2] =   <span class="org-string">"simulation"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"io_output_simulated"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-12" class="outline-4">
<h4 id="sec-3-5-12">Full chain (from simulation &rarr; calibration &rarr; reconstruction)</h4>
<div class="outline-text-4" id="text-3-5-12">
<table id="full_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 8:</span> Full chain processing</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">simulation_chain</td>
</tr>

<tr>
<td class="left">calibration_chain</td>
</tr>

<tr>
<td class="left">process_withcuts__calibrated</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"full_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[3] =   <span class="org-string">"simulation_chain"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"calibration_chain"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"process_with_calibrated_cuts"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-13" class="outline-4">
<h4 id="sec-3-5-13">Minimum bias chain (from simulation &rarr; calibration &rarr; reconstruction)</h4>
<div class="outline-text-4" id="text-3-5-13">
<table id="minimum_bias_chain" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 9:</span> Full chain processing without selection</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">simulation_chain</td>
</tr>

<tr>
<td class="left">calibration_chain</td>
</tr>

<tr>
<td class="left">clustering_chain</td>
</tr>

<tr>
<td class="left">fitting_chain</td>
</tr>

<tr>
<td class="left">particle_tracking_chain</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"minimum_bias_chain"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[5] =   <span class="org-string">"simulation_chain"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"calibration_chain"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"clustering_chain"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"fitting_chain"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"particle_tracking_chain"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-5-14" class="outline-4">
<h4 id="sec-3-5-14">Miscellaneous</h4>
<div class="outline-text-4" id="text-3-5-14">
<table id="reformat_data" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 10:</span> Reformating data</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">remove_header</td>
</tr>

<tr>
<td class="left">add_header</td>
</tr>

<tr>
<td class="left">remove_mchits__visu</td>
</tr>

<tr>
<td class="left">remove_simulated_data</td>
</tr>

<tr>
<td class="left">remove_calibrated_data</td>
</tr>

<tr>
<td class="left">remove_trackerdata__clustering</td>
</tr>

<tr>
<td class="left">remove_trackerdata__trajectory</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"reformat_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::chain_module"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The list of processing modules to be applied (in this order)</span>
modules : <span class="org-variable-name">string</span>[7] =   <span class="org-string">"remove_header"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"add_header"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_mc_visu_hits"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_simulated_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_calibrated_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"remove_tracker_trajectory_data"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> Plot modules</h3>
<div class="outline-text-3" id="text-3-6">
<p>
The <i>plot</i> modules used for final analysis have been grouped and all placed in
the <a href="./snanalysis_manager.html">snanalysis_manager</a> file.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Services</h2>
<div class="outline-text-2" id="text-4">
<p>
A service generally hosts a specific resource that can be shared by many other
software components, including other services or data processing modules (see
<a href="https://nemo.lpc-caen.in2p3.fr/wiki/SNSW_SNailWare_FAQ#Whatisaservice">SN@ilWare FAQ</a>).
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Context service</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"Ctx"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::context_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description File from which the context is to be loaded at program start</span>
load.file : string as <span class="org-variable-name">path</span>  = <span class="org-string">"/tmp/${USER}/snemo.d/snemo_context.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description File to store the context at program termination</span>
store.file : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/snemo_context_end.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Flag to backup the former context load file</span>
backup.file : string as <span class="org-variable-name">path</span> = <span class="org-string">"/tmp/${USER}/snemo.d/snemo_context_bak.conf"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Geometry service</h3>
<div class="outline-text-3" id="text-4-2">
<p>
The following code block declares the geometry service to properly load all the
geometry and material construction of the detector. This service, only declared
here, can be used by several operations like calibration, particle track
reconstruction &#x2026; but all of them will use the same geometry.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"Geo"</span> <span class="org-variable-name">type</span>=<span class="org-string">"geomtools::geometry_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded SuperNEMO geometry manager main configuration file</span>
manager.configuration_file : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/sngeometry_manager.conf"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded SuperNEMO geometry manager must build its mapping lookup table</span>
manager.build_mapping : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Embedded geometry manager's mapping lookup table does not exclude any geometry category</span>
manager.no_excluded_categories : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Cuts service</h3>
<div class="outline-text-3" id="text-4-3">
<p>
The <a href="https://nemo.lpc-caen.in2p3.fr/wiki/cuts">cuts</a> package provides some basic classes and utilities to design, create and
apply selection cuts on arbitrary data models.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"Cuts"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::cut_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The main configuration file for the embedded cut manager</span>
cut_manager.config : string as <span class="org-variable-name">path</span> = <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/cut_manager.conf"</span>
</pre>
</div>
</div>

<div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1">Manager</h4>
<div class="outline-text-4" id="text-4-3-1">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Flag to skip the preloading of pre-registered cuts</span>
factory.no_preload : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag of the cuts' factory</span>
factory.debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description A list of files that contains definition of cuts</span>
cuts.configuration_files : string[5] as <span class="org-variable-name">path</span> =                                                <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/simulated_data_cuts.conf"</span>          <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/calibrated_data_cuts.conf"</span>         <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/tracker_clustering_data_cuts.conf"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/tracker_trajectory_data_cuts.conf"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/particle_track_data_cuts.conf"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-3-2" class="outline-4">
<h4 id="sec-4-3-2">Simulated data selection</h4>
<div class="outline-text-4" id="text-4-3-2">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
[<span class="org-variable-name">name</span>=<span class="org-string">"has_event_header"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"EH"</span>

[<span class="org-variable-name">name</span>=<span class="org-string">"has_simulated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"SD"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-3-3" class="outline-4">
<h4 id="sec-4-3-3">Calibrated data selection</h4>
<div class="outline-text-4" id="text-4-3-3">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li>Check bank availability<br  /><div class="outline-text-5" id="text-4-3-3-1">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_calibrated_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>
</pre>
</div>
</div>
</li>
<li>Check calibrated calorimeter availability<br  /><div class="outline-text-5" id="text-4-3-3-2">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_cd_calorimeter"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::core::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_hit_category : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the MC hit category to be checked</span>
has_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"calorimeter"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"!has_cd_calorimeter"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cut to be negated (mandatory)</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"has_cd_calorimeter"</span>
</pre>
</div>
</div>
</li>
<li>Select number of calibrated calorimeter hits<br  /><div class="outline-text-5" id="text-4-3-3-3">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"cd_calorimeter_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::core::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of calibrated hits</span>
mode.range_hit_category : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the hit category to be checked</span>
range_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"calorimeter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of calibrated hits in the choosen category</span>
range_hit_category.min : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of calibrated hits in the choosen category</span>
range_hit_category.max : <span class="org-variable-name">integer</span> = 2
</pre>
</div>
</div>
</li>
<li>Check calibrated tracker availability<br  /><div class="outline-text-5" id="text-4-3-3-4">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_cd_tracker"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::core::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_hit_category : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the hit category to be checked</span>
has_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"tracker"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"!has_cd_tracker"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::not_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cut to be negated (mandatory)</span>
cut : <span class="org-variable-name">string</span> = <span class="org-string">"has_cd_tracker"</span>
</pre>
</div>
</div>
</li>
<li>Select number of calibrated tracker hits<br  /><div class="outline-text-5" id="text-4-3-3-5">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"cd_tracker_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::core::cut::calibrated_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
CD_label : <span class="org-variable-name">string</span> = <span class="org-string">"CD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of calibrated hits</span>
mode.range_hit_category : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the hit category to be checked</span>
range_hit_category.category : <span class="org-variable-name">string</span> = <span class="org-string">"tracker"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of calibrated hits in the choosen category</span>
range_hit_category.min : <span class="org-variable-name">integer</span> = 3

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of calibrated hits in the choosen category</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">range_hit_category.max : integer = 1</span>
</pre>
</div>
</div>
</li>
<li>Multiple cuts<br  /><div class="outline-text-5" id="text-4-3-3-6">
<p>
This cuts puts together all the previous declared cuts.
</p>
<table id="calibrated_cuts" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 11:</span> Multi selection for validating calibration process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">has_calibrated_data</td>
</tr>

<tr>
<td class="left">has_cd_calorimeter</td>
</tr>

<tr>
<td class="left">has_cd_tracker</td>
</tr>

<tr>
<td class="left">cd_calorimeter_cut</td>
</tr>

<tr>
<td class="left">cd_tracker_cut</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"calibrated_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[5] = <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_calibrated_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_cd_calorimeter"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_cd_tracker"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"cd_calorimeter_cut"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"cd_tracker_cut"</span>
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-4-3-4" class="outline-4">
<h4 id="sec-4-3-4">Tracker clustering data selection</h4>
<div class="outline-text-4" id="text-4-3-4">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li>Check bank availability<br  /><div class="outline-text-5" id="text-4-3-4-1">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_tracker_clustering_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>
</pre>
</div>
</div>
</li>
<li>Select number of cluster<br  /><div class="outline-text-5" id="text-4-3-4-2">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"tcd1_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of clusters</span>
mode.range_cluster : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of clusters</span>
range_cluster.min : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of clusters</span>
range_cluster.max : <span class="org-variable-name">integer</span> = 4
</pre>
</div>
</div>
</li>
<li>Select number of hit within a cluster<br  /><div class="outline-text-5" id="text-4-3-4-3">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"tcd2_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_tracker_clustering_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'tracker clustering data' bank (mandatory)</span>
TCD_label : <span class="org-variable-name">string</span> = <span class="org-string">"TCD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of clusters</span>
mode.range_tracker_hit : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of cells in cluster</span>
range_tracker_hit.min : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Maximal number of cells in cluster</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">range_tracker_hit.max : integer = 100000</span>
</pre>
</div>
</div>
</li>
<li>Multiple cuts<br  /><div class="outline-text-5" id="text-4-3-4-4">
<table id="tracker_clustering_cuts" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 12:</span> Multi-selection for validating tracker clustering process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">has_trackerdata__clustering</td>
</tr>

<tr>
<td class="left">tcd1_cut</td>
</tr>

<tr>
<td class="left">tcd2_cut</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"basic_tracker_clustering_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[3] = <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_tracker_clustering_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"tcd1_cut"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"tcd2_cut"</span>
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-4-3-5" class="outline-4">
<h4 id="sec-4-3-5">Tracker trajectory data selection</h4>
<div class="outline-text-4" id="text-4-3-5">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li>Check bank availability<br  /><div class="outline-text-5" id="text-4-3-5-1">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_tracker_trajectory_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this utils_cut instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.name : <span class="org-variable-name">string</span> = <span class="org-string">"TTD"</span>
</pre>
</div>
</div>
</li>
<li>Multiple cuts<br  /><div class="outline-text-5" id="text-4-3-5-2">
<table id="tracker_trajectory_cuts" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 13:</span> Multi-selection for validating tracker trajectory process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">has_trackerdata__trajectory</td>
</tr>
</tbody>
</table>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"basic_tracker_trajectory_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[1] = <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_tracker_trajectory_data"</span>
</pre>
</div>
</div>
</li></ul>
</div>
<div id="outline-container-sec-4-3-6" class="outline-4">
<h4 id="sec-4-3-6">Particle track selection</h4>
<div class="outline-text-4" id="text-4-3-6">
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description A sample list of setups</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@key_label   "name"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">@meta_label  "type"</span>
</pre>
</div>
</div>

<ul class="org-ul"><li>Check bank availability<br  /><div class="outline-text-5" id="text-4-3-6-1">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_particle_track_data"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::utils_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The running mode of this 'utils_cut' instance</span>
mode : <span class="org-variable-name">string</span> = <span class="org-string">"has_bank"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The name of the bank to be checked (mandatory)</span>
has_bank.descriptions : <span class="org-variable-name">string</span>[1] = <span class="org-string">"PTD@snemo::analysis::model::particle_track_data"</span>
</pre>
</div>
</div>
</li>
<li>Check if particles have been reconstructed<br  /><div class="outline-text-5" id="text-4-3-6-2">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_particle"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) propertyX</span>
mode.has_particles : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</li>

<li>Select number of particles<br  /><div class="outline-text-5" id="text-4-3-6-3">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"range_particle"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of particles trajectories</span>
mode.range_particles : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of particle trajectories in the choosen category</span>
range_particles.min : <span class="org-variable-name">integer</span> = 2

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of particle trajectories in the choosen category</span>
range_particles.max : <span class="org-variable-name">integer</span> = 2
</pre>
</div>
</div>
</li>
<li>Check association with calorimeter block<br  /><div class="outline-text-5" id="text-4-3-6-4">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_associated_calorimeter"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for association between track and calorimeter</span>
mode.has_associated_calorimeters : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</li>
<li>Select number of associated calorimeter blocks<br  /><div class="outline-text-5" id="text-4-3-6-5">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"range_associated_calorimeters"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for multiplicity of associated calorimeters</span>
mode.range_associated_calorimeters : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Minimal number of associated calorimeters in the choosen category</span>
range_associated_calorimeters.min : <span class="org-variable-name">integer</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Maximal number of associated calorimeters in the choosen category</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">range_associated_calorimeters.max : integer = 1</span>
</pre>
</div>
</div>
</li>
<li>Check if track has foil vertex<br  /><div class="outline-text-5" id="text-4-3-6-6">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_vertex_on_foil"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'calibrated data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for vertex extrapolation on source foil</span>
mode.has_vertex_on_foil : <span class="org-variable-name">boolean</span> = 1
</pre>
</div>
</div>
</li>
<li>Select particle charge<br  /><div class="outline-text-5" id="text-4-3-6-7">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_negative_charge"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_charge : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the MC hit category to be checked</span>
has_charge.type : <span class="org-variable-name">string</span> = <span class="org-string">"negative"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_positive_charge"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_charge : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the MC hit category to be checked</span>
has_charge.type : <span class="org-variable-name">string</span> = <span class="org-string">"positive"</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"has_undefined_charge"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_data_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the check for a special boolean (flag) property</span>
mode.has_charge : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Name of the MC hit category to be checked</span>
has_charge.type : <span class="org-variable-name">string</span> = <span class="org-string">"undefined"</span>
</pre>
</div>
</div>
</li>
<li>Reconstruction parameters selection<br  /><div class="outline-text-5" id="text-4-3-6-8">
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"chi2_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_parameter_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the parameter mode</span>
mode.parameter : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Parameter label (parameter can be either 'chi2',</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">'reduced_chi2', 'radius')</span>
parameter.label : <span class="org-variable-name">string</span> = <span class="org-string">"reduced_chi2"</span>

<span class="org-comment-delimiter">##</span><span class="org-comment">@description Parameter minimal value</span>
parameter.min : <span class="org-variable-name">real</span> = 0.0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Parameter minimal value</span>
parameter.max : <span class="org-variable-name">real</span> = 1000.0
</pre>
</div>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"deltay_calo_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"snemo::analysis::cut::basic_particle_track_parameter_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Debug flag</span>
debug : <span class="org-variable-name">boolean</span> = 0

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank (mandatory)</span>
PTD_label : <span class="org-variable-name">string</span> = <span class="org-string">"PTD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The label/name of the 'particle track data' bank</span>
SD_label : <span class="org-variable-name">string</span> = <span class="org-string">"SD"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Activate the parameter mode</span>
mode.parameter : <span class="org-variable-name">boolean</span> = 1

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Parameter label (parameter can be either 'vertex_on_foil',</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">'vertex_on_calorimeter')</span>
parameter.label : <span class="org-variable-name">string</span> = <span class="org-string">"vertex_on_calorimeter"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Parameter coordinate (either x, y or z)</span>
parameter.coordinate : <span class="org-variable-name">string</span> = <span class="org-string">"y"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Parameter minimal value</span>
parameter.min : <span class="org-variable-name">real</span> = 50.0 <span class="org-comment-delimiter"># </span><span class="org-comment">mm</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">#@description Parameter minimal value</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">parameter.max : real = 10.0 # mm</span>
</pre>
</div>
</div>
</li>
<li>Multiple cuts<br  /><div class="outline-text-5" id="text-4-3-6-9">
<table id="particle_track_cuts" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption align="above"><span class="table-number">Table 14:</span> Multi-selection for validating particle tracking process</caption>

<colgroup>
<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">has_particledata__track</td>
</tr>

<tr>
<td class="left">has_particle</td>
</tr>

<tr>
<td class="left">range_particle</td>
</tr>

<tr>
<td class="left">has_associated_calorimeter</td>
</tr>

<tr>
<td class="left">range_associated_calorimeters</td>
</tr>

<tr>
<td class="left">has_vertexfoil__on</td>
</tr>
</tbody>
</table>
<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"particle_track_cut"</span> <span class="org-variable-name">type</span>=<span class="org-string">"cuts::multi_and_cut"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The cuts to be combined</span>
cuts : <span class="org-variable-name">string</span>[6] = <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_particle_track_data"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_particle"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"range_particle"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_associated_calorimeter"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"range_associated_calorimeters"</span> <span class="org-sh-escaped-newline">\</span>
  <span class="org-string">"has_vertex_on_foil"</span>
</pre>
</div>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Histogram service</h3>
<div class="outline-text-3" id="text-4-4">
<p>
The histogram service provides an esay way to handle histogram plot from
different modules (mainly plot modules). It provides a service where 1D or 2D
histograms can be added to a histogram dictionnary.
</p>

<div class="org-src-container">

<pre class="src src-sh">[<span class="org-variable-name">name</span>=<span class="org-string">"Histo"</span> <span class="org-variable-name">type</span>=<span class="org-string">"dpp::histogram_service"</span>]

<span class="org-comment-delimiter">#</span><span class="org-comment">@description Logging priority</span>
logging.priority : <span class="org-variable-name">string</span> = <span class="org-string">"warning"</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">@description The description string of the embedded pool of histograms</span>
pool.description : <span class="org-variable-name">string</span> = <span class="org-string">"SuperNEMO histograms"</span>
</pre>
</div>

<p>
Embedded histograms are declared into a dedicated file defines in
<a href="snanalysis_manager.html">snanalysis_manager.org</a>
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The main configuration file for the embedded histogram manager</span>
pool.histo.setups : string[2] as <span class="org-variable-name">path</span> =                                             <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/basic_histograms.conf"</span> <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"${SNAILWARE_SIMULATION_DIR}/snemo_configuration/current/histogram_templates.conf"</span>
</pre>
</div>

<p>
Finally, all histograms created can be stored inside ROOT files or XML archives.
</p>
<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">@description The ouput file where to store the histograms</span>
output_files : string[2] as <span class="org-variable-name">path</span> =     <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"/tmp/${USER}/snemo.d/histos.root"</span> <span class="org-sh-escaped-newline">\</span>
    <span class="org-string">"/tmp/${USER}/snemo.d/histos.xml"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Running SN@ilWare processing chain</h2>
<div class="outline-text-2" id="text-5">
<p>
To run and to exploit results from SN@ilWare, you first need to export<sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup> the
<code>SNAILWARE_SIMULATION_DIR</code> path. Everything is done with respect to this
directory.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">SNAILWARE_SIMULATION_DIR</span>=${<span class="org-variable-name">PWD</span>}
</pre>
</div>

<p>
Running processing pipeline is done by the <code>dpp_processing</code> program provided by
<code>dpp</code> library. Its call is pretty simple and only implies to have a module
manager file. Depending on the module you want to run, several libraries must be
loaded. For example, if you only want to do simulation, you can run the
following command
</p>

<div class="org-src-container">

<pre class="src src-sh">dpp_processing                                                                                        <span class="org-sh-escaped-newline">\</span>
    --module-manager-config $<span class="org-variable-name">SNAILWARE_SIMULATION_DIR</span>/snemo_configuration/current/module_manager.conf <span class="org-sh-escaped-newline">\</span>
    --module simulation_chain                                                                         <span class="org-sh-escaped-newline">\</span>
    --load-dll sng4                                                                                   <span class="org-sh-escaped-newline">\</span>
    --max-records 100
</pre>
</div>

<p>
It will launch 100 simulated events using the <code>simulation_chain</code> module as
setup <a href="#sec-3-3-2">in this section</a>.
</p>

<p>
In the same way you can run the calibration chain by doing
</p>

<div class="org-src-container">

<pre class="src src-sh">dpp_processing                                                                                        <span class="org-sh-escaped-newline">\</span>
    --module-manager-config $<span class="org-variable-name">SNAILWARE_SIMULATION_DIR</span>/snemo_configuration/current/module_manager.conf <span class="org-sh-escaped-newline">\</span>
    --module calibration_chain                                                                        <span class="org-sh-escaped-newline">\</span>
    --load-dll sng4                                                                                   <span class="org-sh-escaped-newline">\</span>
    --input-file /tmp/$<span class="org-variable-name">USER</span>/io_output_simulated.brio
</pre>
</div>
<p>
where file <code>/tmp/$USER/io_output_simulated.brio</code> is the one produced by the
<code>simulation_chain</code> module as defined and setup <a href="#sec-3-1-2">in this section</a>.
</p>

<p>
All the different process steps can then be run using the dedicated module such
as <a href="#sec-3-4-2">clustering</a> or <a href="#sec-3-4-3">fitting</a> Geiger cells. The most complete mode is the
<code>full_chain</code> module where all process are done from simulation &rarr; calibration &rarr;
track reconstruction.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
At the time of writing this document, emacs version is 24.2.
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
Emacs lisp function can be run using <code>ALT-x</code> command and typing the function
name.
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
Assuming you are using a recent version of <code>bash</code>. With <code>c-shell</code> and
derivatives, <code>export</code> is replace by <code>setenv</code>. Nevertheless, this setup has never
been tested under this shells.
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
File under git version control - commit eb74fff - 2013-12-25
</div>
</body>
</html>
